zabbix_export:
  version: '6.0'
  date: '2024-10-14T16:16:36Z'
  groups:
    - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
      name: Templates/Applications
  templates:
    - uuid: b6027e374e424481951ca2256099515c
      template: 'Nutanix Cluster Prism Element by HTTP'
      name: 'Nutanix Cluster Prism Element by HTTP'
      description: |
        Prism Element: It is a service already built into the platform for every Nutanix cluster deployed. It provides the ability to fully configure, manage, and monitor Nutanix clusters running any hypervisors, however, It only manages the cluster it is part of.
        
        This template is designed for the effortless deployment of Nutanix Cluster Prism Element monitoring and doesn't require any external scripts.
        
        This template can be used in discovery, as well as manually linked to a host - to do so, attach it to the host and manually set the value of the '{$NUTANIX.CLUSTER.UUID}' macro.
        
        More details can be found in the official documentation:
          - on retrieving UUIDs: https://www.nutanixbible.com/19b-cli.html
          - on the Nutanix Prism Element REST API: https://www.nutanix.dev/api_reference/apis/prism_v2.html
          - on differences between Nutanix API versions: https://www.nutanix.dev/api-versions/
        
        Generated by official Zabbix template tool "Templator"
      groups:
        - name: Templates/Applications
      items:
        - uuid: 3761d4da912749c7a84f11a5cfbcf761
          name: 'Nutanix Cluster: Get alert'
          type: SCRIPT
          key: nutanix.cluster.alert.get
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            var Nutanix = {
            	params: {},
            
            	setParams: function (requiredParams, allParams) {
            		requiredParams.forEach(function (field) {
            			if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            				throw 'Required param is not set: ' + field + '.';
            			}
            		});
            
            		Nutanix.params = params;
            	},
            
            	request: function (url) {
            
            		var request = new HttpRequest();
            
            		if (typeof Nutanix.params.proxy !== 'undefined' && Nutanix.params.proxy !== '') {
            			request.setProxy(Nutanix.params.proxy);
            		}
            
            		request.setHttpAuth(HTTPAUTH_BASIC, Nutanix.params.username, Nutanix.params.password);
            
            		Zabbix.log(4, '[ Nutanix ] Sending request: ' + url);
            
            		const response = request.get(url);
            
            		Zabbix.log(4, '[ Nutanix ] Received response with status code ' + request.getStatus() + ': ' + response);
            
            		if (request.getStatus() < 200 || request.getStatus() >= 300) {
            			throw 'Request failed with status code ' + request.getStatus() + ': ' + response;
            		}
            
            		try {
            			response = JSON.parse(response);
            		}
            		catch (error) {
            			throw 'Failed to parse response received from Nutanix PRISM API. Check debug log for more information.';
            		}
            
            		return response;
            	},
            
            	deduplicateAlerts: function (full_data) {
            		const severity_mapping = [
            			'kinfo',
            			'kwarning',
            			'kcritical'
            		]
            
            		var output_data = {};
            		for (var entity in full_data.entities) {
            	
            			if (Nutanix.params.api_method === 'clusters') {
            				if (result.entities[entity].node_uuid.split('-').length == 5) continue;
            			}
            
            			var severity = severity_mapping.indexOf(full_data.entities[entity].severity.toLowerCase()),
            				message = full_data.entities[entity].message,
            				title = full_data.entities[entity].alert_title;
            	
            			full_data.entities[entity].context_types.forEach(function(context, index) {
            				message = message.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            				title = title.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            			});
            	
            			key = md5(title + message);
            			if (key in output_data) {
            				if (full_data.entities[entity].created_time_stamp_in_usecs > output_data[key].created) {
            					output_data[key].created = full_data.entities[entity].created_time_stamp_in_usecs;
            					output_data[key].severity = severity !== -1 ? severity : 3;
            					output_data[key].state = full_data.entities[entity].resolved ? 0 : 1;
            					output_data[key].message = full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message;
            					output_data[key].last_id = full_data.entities[entity].id;
            				}
            				output_data[key].count += 1;
            			} else {
            				output_data[key] = {
            					"name": title + ' - ' + message,
            					"title": title != '' ? title : message,
            					"created": full_data.entities[entity].created_time_stamp_in_usecs,
            					"severity": severity !== -1 ? severity : 3,
            					"state": full_data.entities[entity].resolved ? 0 : 1,
            					"message": full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message,
            					"last_id": full_data.entities[entity].id,
            					"count": 1
            				}
            			}
            		}
            
            		return output_data;
            	},
            
            	cleanUnsupported: function (full_stat) {
            		var output_stat = {};
            		for (var element in full_stat) {
            			if (full_stat[element] !== '-1') {
            				output_stat[element] = full_stat[element];
            			}
            		};
            		
            		return output_stat;
            	}
            };
            
            try {
            	const params = JSON.parse(value);
            	Nutanix.setParams(['endpoint_host', 'endpoint_port', 'username', 'password', 'auth_type', 'api_method', 'target_uuid'], params);
            
            	const url = 'https://' + Nutanix.params.endpoint_host + ':' + Nutanix.params.endpoint_port + '/PrismGateway/services/rest/v2.0/' + Nutanix.params.api_method + '/' + Nutanix.params.target_uuid + '/alerts',
            		result = Nutanix.request(url);
            
            	return JSON.stringify(Nutanix.deduplicateAlerts(result));
            }
            catch (error) {
            	error += (String(error).endsWith('.')) ? '' : '.';
            	Zabbix.log(4, '[ Nutanix ] ERROR: ' + error);
            
            	return JSON.stringify({ 'error': error });
            }
            
          description: 'Get data about alerts.'
          timeout: '{$NUTANIX.TIMEOUT}'
          parameters:
            - name: api_method
              value: clusters
            - name: auth_type
              value: basic
            - name: endpoint_host
              value: '{$NUTANIX.PRISM.ELEMENT.IP}'
            - name: endpoint_port
              value: '{$NUTANIX.PRISM.ELEMENT.PORT}'
            - name: password
              value: '{$NUTANIX.PASSWORD}'
            - name: proxy
              value: '{$NUTANIX.PROXY}'
            - name: target_uuid
              value: '{$NUTANIX.CLUSTER.UUID}'
            - name: username
              value: '{$NUTANIX.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: 1dc2ba69aa5440d8830313157499179e
          name: 'Nutanix Cluster: Get alert check'
          type: DEPENDENT
          key: nutanix.cluster.alert.get.check
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          description: 'Data collection check. Check the latest values for details.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.error
              error_handler: CUSTOM_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: nutanix.cluster.alert.get
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: 741e1271a7454b9ab0214ae39b04f9cb
              expression: 'length(last(/Nutanix Cluster Prism Element by HTTP/nutanix.cluster.alert.get.check))>0'
              name: 'Nutanix Cluster: Failed to get alert data from the API'
              priority: HIGH
              description: 'Failed to get data from the API. Check the latest values for details.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 5567209755544223bf83e977ec209eaa
          name: 'Nutanix Cluster: General: Cluster operation mode'
          type: DEPENDENT
          key: nutanix.cluster.cluster.operation.mode
          delay: '0'
          history: 7d
          description: |
            The cluster operation mode. One of the following:
            - NORMAL;
            - OVERRIDE;
            - READONLY;
            - STANDALONE;
            - SWITCH_TO_TWO_NODE;
            - UNKNOWN.
          valuemap:
            name: 'Nutanix: Cluster operation mode'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.operation_mode
              error_handler: DISCARD_VALUE
            - type: JAVASCRIPT
              parameters:
                - |
                  const idx = [
                    'NORMAL',
                    'OVERRIDE',
                    'READONLY',
                    'STANDALONE',
                    'SWITCH_TO_TWO_NODE'
                  ].indexOf(value.toUpperCase());
                  return idx !== -1 ? idx : 5;
                  
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: c11c24fa7c7047f5ba5f7f39bccb656e
          name: 'Nutanix Cluster: Content Cache: References'
          type: DEPENDENT
          key: nutanix.cluster.content.cache.dedup.ref.num
          delay: '0'
          history: 7d
          description: 'Average number of content cache references.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_num_dedup_ref_count_pph
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: e1696a8e6028406e8e9005ebc295a4fa
          name: 'Nutanix Cluster: Content Cache: Hit rate, %'
          type: DEPENDENT
          key: nutanix.cluster.content.cache.hit.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Content cache hits over all lookups.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_hit_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: fc40402b8e51471fb3299796c62a9669
          name: 'Nutanix Cluster: Content Cache: Logical memory usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.content.cache.logical.memory.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Logical memory used to cache data without deduplication in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_logical_memory_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: 24b35405698e4e4d95ef2be9c5d0d44f
          name: 'Nutanix Cluster: Content Cache: Logical SSD usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.content.cache.logical.ssd.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Logical SSD memory used to cache data without deduplication in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_logical_ssd_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: 91b14b7aec844e38805b003b89059304
          name: 'Nutanix Cluster: Content Cache: Number of lookups'
          type: DEPENDENT
          key: nutanix.cluster.content.cache.lookups.num
          delay: '0'
          history: 7d
          description: 'Number of lookups on the content cache.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_num_lookups
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 95f4f380b95945d182fd99053477b592
          name: 'Nutanix Cluster: Content Cache: Physical memory usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.content.cache.physical.memory.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Real memory used to cache data via the content cache in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_physical_memory_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: f2ecb476122e4289972b3132178c969e
          name: 'Nutanix Cluster: Content Cache: Physical SSD usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.content.cache.physical.ssd.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Real SSD usage used to cache data via the content cache in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_physical_ssd_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: aa48c01e28d840e6a2bb87b892835f48
          name: 'Nutanix Cluster: Content Cache: Logical saved memory usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.content.cache.saved.memory.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Memory saved due to content cache deduplication in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_saved_memory_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: 894a313d9eb5409ba7c198c62cf7d9f9
          name: 'Nutanix Cluster: Content Cache: Saved SSD usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.content.cache.saved.ssd.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'SSD usage saved due to content cache deduplication in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_saved_ssd_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: c107dffc846940f2b32e1d7d01a22cb6
          name: 'Nutanix Cluster: Controller: Random IO'
          type: DEPENDENT
          key: nutanix.cluster.controller.io.random
          delay: '0'
          history: 7d
          description: 'The number of random Input/Output operations from the controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_random_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: eea230e867044336a10f8308f05b5c32
          name: 'Nutanix Cluster: Controller: Random IO, %'
          type: DEPENDENT
          key: nutanix.cluster.controller.io.random.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of random Input/Output from the controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_random_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: ef919d4e2bff4cbc94bd59be2cfb50f4
          name: 'Nutanix Cluster: Controller: Sequence IO'
          type: DEPENDENT
          key: nutanix.cluster.controller.io.sequence
          delay: '0'
          history: 7d
          description: 'The number of sequential Input/Output operations from the controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_seq_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 058564b6e59f470c9ef74a9d6b68d8d9
          name: 'Nutanix Cluster: Controller: Sequence IO, %'
          type: DEPENDENT
          key: nutanix.cluster.controller.io.sequence.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of sequential Input/Output from the controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_seq_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: f9a5a272fad04acb8d5fc1d806e01d60
          name: 'Nutanix Cluster: General: IO'
          type: DEPENDENT
          key: nutanix.cluster.general.io
          delay: '0'
          history: 7d
          description: 'The number of Input/Output operations from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 642236ff71de4ead98e8f738e8524694
          name: 'Nutanix Cluster: General: IO, bandwidth'
          type: DEPENDENT
          key: nutanix.cluster.general.io.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Data transferred in B/sec from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: bedecc8f97b74f7287a4a094fe26cfe7
          name: 'Nutanix Cluster: General: IO, latency'
          type: DEPENDENT
          key: nutanix.cluster.general.io.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output latency from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.avg_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: ee2c4b096f0f4ac1b60b6441094fe076
          name: 'Nutanix Cluster: General: Random IO'
          type: DEPENDENT
          key: nutanix.cluster.general.io.random
          delay: '0'
          history: 7d
          description: 'The number of random Input/Output operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_random_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: c03b24dc56ae4c23a82578479ae2eb6d
          name: 'Nutanix Cluster: General: Random IO, %'
          type: DEPENDENT
          key: nutanix.cluster.general.io.random.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of random Input/Output operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.random_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 78e01fe5d2dd4f07b9ee34b49fac9ca4
          name: 'Nutanix Cluster: General: Read IO'
          type: DEPENDENT
          key: nutanix.cluster.general.io.read
          delay: '0'
          history: 7d
          description: 'Total number of Input/Output read operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_read_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 6fb8985279ff4aeb932270322a4e41f6
          name: 'Nutanix Cluster: General: Read IO, bandwidth'
          type: DEPENDENT
          key: nutanix.cluster.general.io.read.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Read data transferred in B/sec from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.read_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: a6fcbeca6b1648659e0e74225d40863a
          name: 'Nutanix Cluster: General: Read IO, latency'
          type: DEPENDENT
          key: nutanix.cluster.general.io.read.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Average Input/Output read latency.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.avg_read_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: d2b762b0b9b74e8a8e8a8e40a3e932cf
          name: 'Nutanix Cluster: General: Read IO, %'
          type: DEPENDENT
          key: nutanix.cluster.general.io.read.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The total percentage of Input/Output operations that are reads.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.read_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: ba49928014e64b8d8f90dbc76c2b6b57
          name: 'Nutanix Cluster: General: IO total read, bytes'
          type: DEPENDENT
          key: nutanix.cluster.general.io.read.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total size of Input/Output read operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_read_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 30a67ff848484e4e9552a1bcd66c1f68
          name: 'Nutanix Cluster: General: IO total read, sec'
          type: DEPENDENT
          key: nutanix.cluster.general.io.read.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total time of Input/Output read operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_read_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 9ce271586ac249d2b2fa27fa9b3e3878
          name: 'Nutanix Cluster: General: Sequence IO'
          type: DEPENDENT
          key: nutanix.cluster.general.io.sequence
          delay: '0'
          history: 7d
          description: 'The number of sequential Input/Output operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_seq_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 97990e2fb53b464cadc13d0038f21199
          name: 'Nutanix Cluster: General: Sequence IO, %'
          type: DEPENDENT
          key: nutanix.cluster.general.io.sequence.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of sequential Input/Output.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.seq_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: a01ae646308045d3b88d8e917000018c
          name: 'Nutanix Cluster: General: IO total, bytes'
          type: DEPENDENT
          key: nutanix.cluster.general.io.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total size of Input/Output operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 108356c5fd5c49c79840b7a6d9de8659
          name: 'Nutanix Cluster: General: IO total, sec'
          type: DEPENDENT
          key: nutanix.cluster.general.io.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total time of Input/Output operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: f9b61618e2e545ac9e859d101bc10651
          name: 'Nutanix Cluster: General: Write IO'
          type: DEPENDENT
          key: nutanix.cluster.general.io.write
          delay: '0'
          history: 7d
          description: 'Input/Output write operations from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_write_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 86dea3be95e44cac9b4a7ab8b5105681
          name: 'Nutanix Cluster: General: Write IO, bandwidth'
          type: DEPENDENT
          key: nutanix.cluster.general.io.write.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Write data transferred in B/sec from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.write_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 700b81f909c1471eb2fc0611e74876f3
          name: 'Nutanix Cluster: General: Write IO, latency'
          type: DEPENDENT
          key: nutanix.cluster.general.io.write.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Average Input/Output write operation latency.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.avg_write_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 41950b93ee44469c8589bb5c0f8c0911
          name: 'Nutanix Cluster: General: Write IO, %'
          type: DEPENDENT
          key: nutanix.cluster.general.io.write.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Total percentage of Input/Output operations that are writes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.write_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 4aedd6caaa014e42a7bacac34e9809ac
          name: 'Nutanix Cluster: General: IOPS'
          type: DEPENDENT
          key: nutanix.cluster.general.iops
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output operations per second from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: c9e26c8d0e2f44089a9591769ab2eceb
          name: 'Nutanix Cluster: General: Read IOPS'
          type: DEPENDENT
          key: nutanix.cluster.general.iops.read
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output read operations per second from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_read_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 96182d97edac497883185899cd978f26
          name: 'Nutanix Cluster: General: Write IOPS'
          type: DEPENDENT
          key: nutanix.cluster.general.iops.write
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '!iops'
          description: 'Total number of Input/Output write operations per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_write_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: f9433014206a42d3aecf207448f6dee0
          name: 'Nutanix Cluster: General: Storage capacity, bytes'
          type: DEPENDENT
          key: nutanix.cluster.general.storage.capacity.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total size of the datastores used by this system in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage.capacity_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 702544e35ca1490cb401d7730df044fd
          name: 'Nutanix Cluster: General: Storage free, bytes'
          type: DEPENDENT
          key: nutanix.cluster.general.storage.free.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total free space of the datastores used by this system in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage.free_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 87a495b3a7e246e187d034166ec9e19d
          name: 'Nutanix Cluster: General: Storage logical usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.general.storage.logical.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total logical space used by the datastores of this system in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage.logical_usage_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 02809b0e347d49eeb1f8a8deac32af86
          name: 'Nutanix Cluster: General: Storage usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.general.storage.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total physical datastore space used by this host and all its snapshots on the datastores.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage.usage_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 4df3faff926b4d92bffd46949e6443bf
          name: 'Nutanix Cluster: General: Timespan, sec'
          type: DEPENDENT
          key: nutanix.cluster.general.timespan.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Cluster timespan.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.timespan_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 9b9d93d4a09c45d2bd61a530f5e35fe9
          name: 'Nutanix Cluster: General: Total transformed usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.general.transformed.usage.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Actual usage of storage.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_transformed_usage_bytes
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 1d7c83bbf00149b2a37c1f983d44f403
          name: 'Nutanix Cluster: General: Total untransformed usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.general.untransformed.usage.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Logical usage of storage (physical usage divided by the replication factor).'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_untransformed_usage_bytes
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 252f167e9e7d4db1abcfa9808a0c06d9
          name: 'Nutanix Cluster: General: Upgrade progress'
          type: DEPENDENT
          key: nutanix.cluster.general.upgrade.progress
          delay: '0'
          history: 7d
          description: 'Indicates whether the cluster is currently in an update state.'
          valuemap:
            name: 'Nutanix: Boolean'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.is_upgrade_in_progress
              error_handler: DISCARD_VALUE
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
              error_handler: CUSTOM_VALUE
              error_handler_params: '2'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 400a5d3e0f1c47cd881c1dfe04b65948
          name: 'Nutanix Cluster: General: Version'
          type: DEPENDENT
          key: nutanix.cluster.general.upgrade.version
          delay: '0'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: 'Current software version in the cluster.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.version
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 4f03001a7caa42d29cc2213137fbbb16
          name: 'Nutanix Cluster: Hypervisor: CPU usage, %'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.cpu.usage.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Percentage of CPU used by the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_cpu_usage_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: cpu
        - uuid: a5338864811a4e5795ead521cbcf875e
          name: 'Nutanix Cluster: Hypervisor: IO'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The number of Input/Output operations from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 1f56c2405992402e8897cde88f36284e
          name: 'Nutanix Cluster: Hypervisor: IO, bandwidth'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Data transferred in B/sec from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: f4a46c9187584d88a256eb364884303f
          name: 'Nutanix Cluster: Hypervisor: IO, latency'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output operation latency from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_avg_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 58fe88d634a045f0ba0259ea2e55e757
          name: 'Nutanix Cluster: Hypervisor: Read IO'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.read
          delay: '0'
          history: 7d
          description: 'The number of Input/Output read operations from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_read_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: cbf141d09f7347b2b3fdb16ccd6e172c
          name: 'Nutanix Cluster: Hypervisor: Read IO, bandwidth'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.read.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Read data transferred in B/sec from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_read_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 8e163e2751cb43a098a0cbfb6405c1d3
          name: 'Nutanix Cluster: Hypervisor: Read IO, latency'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.read.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output read latency from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_avg_read_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 7b43893117524aaf823baafa3dd42e0a
          name: 'Nutanix Cluster: Hypervisor: IO total read, bytes'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.read.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total Input/Output read operation size from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_total_read_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: e60bc882d8024ca59b9b6719be60fb65
          name: 'Nutanix Cluster: Hypervisor: IO total read, sec'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.read.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total Input/Output read operation time from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_total_read_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 91517ef954de4a0892bac9091b0ac09a
          name: 'Nutanix Cluster: Hypervisor: IO total, bytes'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total Input/Output operation size from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_total_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: dcc89d2d7d2e4d0c9c46b369af90b17a
          name: 'Nutanix Cluster: Hypervisor: IO total, sec'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total Input/Output operation time from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_total_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: ee50c946b2a9490fafc2c25abd7c39e1
          name: 'Nutanix Cluster: Hypervisor: Write IO'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.write
          delay: '0'
          history: 7d
          description: 'Input/Output write operations from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_write_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 13a6557f9bce4e5094d35537da7c48a7
          name: 'Nutanix Cluster: Hypervisor: Write IO, bandwidth'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.write.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Write data transferred in B/sec from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_write_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: a161c827020740e28edf2c223f1c498b
          name: 'Nutanix Cluster: Hypervisor: Write IO, latency'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.io.write.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output write latency from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_avg_write_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: e51fd2cd48a441d1a5699581ccab53fb
          name: 'Nutanix Cluster: Hypervisor: IOPS'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.iops
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output operations per second from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 01241090d9f743d9bf8532c950506a2a
          name: 'Nutanix Cluster: Hypervisor: Read IOPS'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.iops.read
          delay: '0'
          history: 7d
          description: 'Input/Output read operations per second from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_read_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: c85d41ca89f2438fb9b4c06da9ae0bc7
          name: 'Nutanix Cluster: Hypervisor: Write IOPS'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.iops.write
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output write operations per second from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_write_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 6c7717cbf8f44c0dbc69f6b4bd845d65
          name: 'Nutanix Cluster: Hypervisor: Memory usage, %'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.memory.usage.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Percentage of memory used by the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_memory_usage_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: memory
        - uuid: 41f4cfc6eb7746799e4bb05306527995
          name: 'Nutanix Cluster: Hypervisor: Timespan, sec'
          type: DEPENDENT
          key: nutanix.cluster.hypervisor.timespan.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Hypervisor timespan.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_timespan_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 95a5fd893da84a7098cba12ffa1743ca
          name: 'Nutanix Cluster: Get metric'
          type: SCRIPT
          key: nutanix.cluster.metric.get
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            var Nutanix = {
            	params: {},
            
            	setParams: function (requiredParams, allParams) {
            		requiredParams.forEach(function (field) {
            			if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            				throw 'Required param is not set: ' + field + '.';
            			}
            		});
            
            		Nutanix.params = params;
            	},
            
            	request: function (url) {
            
            		var request = new HttpRequest();
            
            		if (typeof Nutanix.params.proxy !== 'undefined' && Nutanix.params.proxy !== '') {
            			request.setProxy(Nutanix.params.proxy);
            		}
            
            		request.setHttpAuth(HTTPAUTH_BASIC, Nutanix.params.username, Nutanix.params.password);
            
            		Zabbix.log(4, '[ Nutanix ] Sending request: ' + url);
            
            		const response = request.get(url);
            
            		Zabbix.log(4, '[ Nutanix ] Received response with status code ' + request.getStatus() + ': ' + response);
            
            		if (request.getStatus() < 200 || request.getStatus() >= 300) {
            			throw 'Request failed with status code ' + request.getStatus() + ': ' + response;
            		}
            
            		try {
            			response = JSON.parse(response);
            		}
            		catch (error) {
            			throw 'Failed to parse response received from Nutanix PRISM API. Check debug log for more information.';
            		}
            
            		return response;
            	},
            
            	deduplicateAlerts: function (full_data) {
            		const severity_mapping = [
            			'kinfo',
            			'kwarning',
            			'kcritical'
            		]
            
            		var output_data = {};
            		for (var entity in full_data.entities) {
            	
            			if (Nutanix.params.api_method === 'clusters') {
            				if (result.entities[entity].node_uuid.split('-').length == 5) continue;
            			}
            
            			var severity = severity_mapping.indexOf(full_data.entities[entity].severity.toLowerCase()),
            				message = full_data.entities[entity].message,
            				title = full_data.entities[entity].alert_title;
            	
            			full_data.entities[entity].context_types.forEach(function(context, index) {
            				message = message.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            				title = title.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            			});
            	
            			key = md5(title + message);
            			if (key in output_data) {
            				if (full_data.entities[entity].created_time_stamp_in_usecs > output_data[key].created) {
            					output_data[key].created = full_data.entities[entity].created_time_stamp_in_usecs;
            					output_data[key].severity = severity !== -1 ? severity : 3;
            					output_data[key].state = full_data.entities[entity].resolved ? 0 : 1;
            					output_data[key].message = full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message;
            					output_data[key].last_id = full_data.entities[entity].id;
            				}
            				output_data[key].count += 1;
            			} else {
            				output_data[key] = {
            					"name": title + ' - ' + message,
            					"title": title != '' ? title : message,
            					"created": full_data.entities[entity].created_time_stamp_in_usecs,
            					"severity": severity !== -1 ? severity : 3,
            					"state": full_data.entities[entity].resolved ? 0 : 1,
            					"message": full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message,
            					"last_id": full_data.entities[entity].id,
            					"count": 1
            				}
            			}
            		}
            
            		return output_data;
            	},
            
            	cleanUnsupported: function (full_stat) {
            		var output_stat = {};
            		for (var element in full_stat) {
            			if (full_stat[element] !== '-1') {
            				output_stat[element] = full_stat[element];
            			}
            		};
            		
            		return output_stat;
            	}
            };
            
            try {
            	const params = JSON.parse(value);
            	Nutanix.setParams(['endpoint_host', 'endpoint_port', 'username', 'password', 'auth_type', 'api_method', 'target_uuid'], params);
            
            	const url = 'https://' + Nutanix.params.endpoint_host + ':' + Nutanix.params.endpoint_port + '/PrismGateway/services/rest/v2.0/' + Nutanix.params.api_method + '/' + Nutanix.params.target_uuid;
            	var result = Nutanix.request(url);
            
            	result.stats = Nutanix.cleanUnsupported(result.stats);
            
            	return JSON.stringify(result);
            }
            catch (error) {
            	error += (String(error).endsWith('.')) ? '' : '.';
            	Zabbix.log(4, '[ Nutanix ] ERROR: ' + error);
            
            	return JSON.stringify({ 'error': error });
            }
            
          description: 'Get data about basic metrics.'
          timeout: '{$NUTANIX.TIMEOUT}'
          parameters:
            - name: api_method
              value: clusters
            - name: auth_type
              value: basic
            - name: endpoint_host
              value: '{$NUTANIX.PRISM.ELEMENT.IP}'
            - name: endpoint_port
              value: '{$NUTANIX.PRISM.ELEMENT.PORT}'
            - name: password
              value: '{$NUTANIX.PASSWORD}'
            - name: proxy
              value: '{$NUTANIX.PROXY}'
            - name: target_uuid
              value: '{$NUTANIX.CLUSTER.UUID}'
            - name: username
              value: '{$NUTANIX.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: e8f1b3e3920b46cfa96ff0602fb30e6b
          name: 'Nutanix Cluster: Get metric check'
          type: DEPENDENT
          key: nutanix.cluster.metric.get.check
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          description: 'Data collection check. Check the latest values for details.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.error
              error_handler: CUSTOM_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: 5ac8ddec162b4668b1df1493216792d6
              expression: 'length(last(/Nutanix Cluster Prism Element by HTTP/nutanix.cluster.metric.get.check))>0'
              name: 'Nutanix Cluster: Failed to get metric data from the API'
              priority: HIGH
              description: 'Failed to get data from the API. Check the latest values for details.'
              tags:
                - tag: scope
                  value: availability
        - uuid: fc9cc5b7999241e4ae0e097826633569
          name: 'Nutanix Cluster: General: Current redundancy factor'
          type: DEPENDENT
          key: nutanix.cluster.redundancy.factor.current
          delay: '0'
          history: 7d
          description: 'Current value of the redundancy factor on the cluster.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.cluster_redundancy_state.current_redundancy_factor
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: df508a0e13a843e492d32ffd36eb99e8
          name: 'Nutanix Cluster: General: Desired redundancy factor'
          type: DEPENDENT
          key: nutanix.cluster.redundancy.factor.desired
          delay: '0'
          history: 7d
          description: 'The desired value of the redundancy factor on the cluster.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.cluster_redundancy_state.desired_redundancy_factor
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: application
        - uuid: b6c6cc1e1a62485fb5b4a1ea3c0b0c4b
          name: 'Nutanix Cluster: Storage Controller: IO'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io
          delay: '0'
          history: 7d
          description: 'Input/Output operations from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 2146014b3f00416ab56149329ebf1ca3
          name: 'Nutanix Cluster: Storage Controller: IO, bandwidth'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Data transferred in B/sec from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 6538913d53aa4c0da0b882a42b73faa0
          name: 'Nutanix Cluster: Storage Controller: IO, latency'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output latency from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 315905ef6b2f497294ccf4702ab5aadf
          name: 'Nutanix Cluster: Storage Controller: Read IO'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.read
          delay: '0'
          history: 7d
          description: 'Input/Output read operations from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_read_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 7871d52184994b799f58e180f7dd89a7
          name: 'Nutanix Cluster: Storage Controller: Read IO, bandwidth'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.read.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Read data transferred in B/sec from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_read_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: f4709e46e4684dfe95951705a3462e42
          name: 'Nutanix Cluster: Storage Controller: Read IO, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.read.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Storage controller average read Input/Output in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_read_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 57c98e0c2d8c426d91f02320b140a3b0
          name: 'Nutanix Cluster: Storage Controller: Read IO, latency'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.read.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output read latency from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_read_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: d57e65a31e8047bd83064913b0f0fc96
          name: 'Nutanix Cluster: Storage Controller: Read IO, %'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.read.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Percentage of Input/Output operations from the Storage Controller that are reads.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_read_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: dc7f96ef1c814eb6900bd0bb41405c4f
          name: 'Nutanix Cluster: Storage Controller: IO total read, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.read.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total controller read Input/Output size.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_read_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 9084bbeefa514342bc6550b20145ae87
          name: 'Nutanix Cluster: Storage Controller: IO total read, sec'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.read.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total controller read Input/Output time.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_read_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: cb3d76f22bec49959d17f827e1fda1b5
          name: 'Nutanix Cluster: Storage Controller: IO total, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total controller Input/Output size.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: a5716932dcc3468f812c77b28f29bf01
          name: 'Nutanix Cluster: Storage Controller: IO total, sec'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.total.sec
          delay: '0'
          history: 7d
          units: s
          description: 'Total controller Input/Output time.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: ecde6b6bd4344b819a39b0d3e2d4e3dc
          name: 'Nutanix Cluster: Storage Controller: Write IO'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.write
          delay: '0'
          history: 7d
          description: 'Input/Output write operations to the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_write_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 6d973393007a4851a96f1a2208c99ac0
          name: 'Nutanix Cluster: Storage Controller: Write IO, bandwidth'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.write.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Write data transferred in B/sec to the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_write_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 829dfe75c62c4770acd8889d5e0f8f61
          name: 'Nutanix Cluster: Storage Controller: Write IO, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.write.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Storage Controller average write Input/Output in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_write_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: a940bb2ff5d549f085997200eb1d09e7
          name: 'Nutanix Cluster: Storage Controller: Write IO, latency'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.write.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output write latency to the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_write_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: dfda9f9c6f40488e8a47e591a75775de
          name: 'Nutanix Cluster: Storage Controller: Write IO, %'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.io.write.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Percentage of Input/Output operations to the Storage Controller that are writes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_write_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: b4c5601a57d34fd886a508523f297a49
          name: 'Nutanix Cluster: Storage Controller: IOPS'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.iops
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output operations per second from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: f963f424f6644d46b109293108a011b2
          name: 'Nutanix Cluster: Storage Controller: Read IOPS'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.iops.read
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output read operations per second from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_read_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 298dee7b25e044edb4657855b0ec3ae7
          name: 'Nutanix Cluster: Storage Controller: Write IOPS'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.iops.write
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output write operations per second to the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_write_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 3d48b9ed84164fabb18db28be446c933
          name: 'Nutanix Cluster: Storage Tier: Das-sata capacity, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.tier.das_sata.capacity.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The total capacity of Das-sata in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.das-sata.capacity_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: b3b933a4a7284d788095f2f98700a75a
          name: 'Nutanix Cluster: Storage Tier: Das-sata free, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.tier.das_sata.free.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The free space of Das-sata in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.das-sata.free_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 81e208fb9c4949919091c18325557fd9
          name: 'Nutanix Cluster: Storage Tier: Das-sata usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.tier.das_sata.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The used space of Das-sata in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.das-sata.usage_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 95c826ea031b462ea1e1ae79e3f4966d
          name: 'Nutanix Cluster: Storage Tier: SSD capacity, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.tier.ssd.capacity.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The total capacity of SSD in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.ssd.capacity_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: a17766d845a1410b9b4fe20044d79217
          name: 'Nutanix Cluster: Storage Tier: SSD free, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.tier.ssd.free.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The free space of SSD in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.ssd.free_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 9a10e8850e5f419d8e600757598435bf
          name: 'Nutanix Cluster: Storage Tier: SSD usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.tier.ssd.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The used space of SSD in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.ssd.usage_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 1d4367a1f30a46818871cd4a105c73dc
          name: 'Nutanix Cluster: Storage Controller: Timespan, sec'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.timespan.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Controller timespan.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_timespan_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: eb510c9fa96947b9a3d83ce6ab87d217
          name: 'Nutanix Cluster: Storage Controller: Total transformed usage, bytes'
          type: DEPENDENT
          key: nutanix.cluster.storage.controller.transformed.usage.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Actual usage of the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_transformed_usage_bytes
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.cluster.metric.get
          tags:
            - tag: component
              value: storage
      discovery_rules:
        - uuid: 7990ed903e40431999d75702d83b2cbb
          name: 'Alert discovery'
          type: DEPENDENT
          key: nutanix.cluster.alert.discovery
          delay: '0'
          filter:
            evaltype: AND
            conditions:
              - macro: '{#ALERT.NAME}'
                value: '{$NUTANIX.ALERT.DISCOVERY.NAME.MATCHES}'
                formulaid: A
              - macro: '{#ALERT.NAME}'
                value: '{$NUTANIX.ALERT.DISCOVERY.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
              - macro: '{#ALERT.SEVERITY}'
                value: '{$NUTANIX.ALERT.DISCOVERY.SEVERITY.MATCHES}'
                formulaid: C
              - macro: '{#ALERT.STATE}'
                value: '{$NUTANIX.ALERT.DISCOVERY.STATE.MATCHES}'
                formulaid: D
          description: |
            Discovery of all alerts.
            Alerts will be grouped by title. For each alert, in addition to the basic information, the number of activation and last alert ID will be available.
          item_prototypes:
            - uuid: 0bc36bd639ed43548a3d223abecfc9aa
              name: 'Nutanix Cluster: Alert [{#ALERT.NAME}]: Count alerts'
              type: DEPENDENT
              key: 'nutanix.cluster.alert.count["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              description: 'The number of times this alert was triggered.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.count'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.cluster.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: eafc52b6bb6741b1b7ac2b55bfcf5150
              name: 'Nutanix Cluster: Alert [{#ALERT.NAME}]: Create datetime'
              type: DEPENDENT
              key: 'nutanix.cluster.alert.created["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              units: unixtime
              description: 'The alert creation date and time.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.created'
                - type: MULTIPLIER
                  parameters:
                    - '0.000001'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.cluster.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: b5b880f906d24f16a7a6f9eaf301d2f0
              name: 'Nutanix Cluster: Alert [{#ALERT.NAME}]: Last alert ID'
              type: DEPENDENT
              key: 'nutanix.cluster.alert.last_id["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: 'Latest ID of the alert.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.last_id'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
              master_item:
                key: nutanix.cluster.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: ae18c1bc06ea4a429a753b9c6d989cc0
              name: 'Nutanix Cluster: Alert [{#ALERT.NAME}]: Detailed message'
              type: DEPENDENT
              key: 'nutanix.cluster.alert.message["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Detailed information about the current alert.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.message'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
              master_item:
                key: nutanix.cluster.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: 6b72da2095154db1b7561a2bedca8b33
              name: 'Nutanix Cluster: Alert [{#ALERT.NAME}]: Severity'
              type: DEPENDENT
              key: 'nutanix.cluster.alert.severity["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              description: |
                Alert severity. One of the following:
                - Info;
                - Warning;
                - Critical;
                - Unknown.
              valuemap:
                name: 'Nutanix: Alert severity'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.severity'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.cluster.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: 269d93010a5c453e9361a15827325743
              name: 'Nutanix Cluster: Alert [{#ALERT.NAME}]: State'
              type: DEPENDENT
              key: 'nutanix.cluster.alert.state["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              description: |
                Alert state. One of the following:
                - OK;
                - Problem.
              valuemap:
                name: 'Nutanix: Alert state'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.state'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.cluster.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: d9c2ca71d1a041af83a1b4e9d1df46f2
              name: 'Nutanix Cluster: Alert [{#ALERT.NAME}]: Full title'
              type: DEPENDENT
              key: 'nutanix.cluster.alert.title["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'The full title of the alert.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.title'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
              master_item:
                key: nutanix.cluster.alert.get
              tags:
                - tag: component
                  value: alert
          master_item:
            key: nutanix.cluster.alert.get
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  const json_data = JSON.parse(value);
                  var output_data = [];
                  
                  for (var entity in json_data) {
                      output_data.push({
                          "{#ALERT.KEY}": entity,
                          "{#ALERT.STATE}": json_data[entity].state,
                          "{#ALERT.TITLE}": json_data[entity].title,
                          "{#ALERT.SEVERITY}": json_data[entity].severity,
                          "{#ALERT.NAME}": json_data[entity].name.length > 50 ? json_data[entity].name.substr(0, 50) + '...' : json_data[entity].name
                      });
                  }
                  
                  return JSON.stringify(output_data);
                  
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
      tags:
        - tag: class
          value: software
        - tag: target
          value: cluster
        - tag: target
          value: nutanix
        - tag: target
          value: prism-element
      macros:
        - macro: '{$NUTANIX.ALERT.DISCOVERY.NAME.MATCHES}'
          value: '.*'
          description: 'Filter of discoverable Nutanix alerts by name.'
        - macro: '{$NUTANIX.ALERT.DISCOVERY.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Filter to exclude discovered Nutanix alerts by name.'
        - macro: '{$NUTANIX.ALERT.DISCOVERY.SEVERITY.MATCHES}'
          value: '.*'
          description: 'Filter to exclude discovered Nutanix alerts by severity. Set all possible severities for filtering in the range 0-2. "0" - Info, "1" - Warning, "2" - Critical.'
        - macro: '{$NUTANIX.ALERT.DISCOVERY.STATE.MATCHES}'
          value: '.*'
          description: 'Filter to exclude discovered Nutanix alerts by state. Set "1" for filtering only problem alerts or "0" for resolved ones.'
        - macro: '{$NUTANIX.CLUSTER.UUID}'
          description: 'UUID of the cluster.'
        - macro: '{$NUTANIX.PASSWORD}'
          type: SECRET_TEXT
          description: 'Nutanix API password.'
        - macro: '{$NUTANIX.PRISM.ELEMENT.IP}'
          value: '<Put your IP here>'
          description: 'Set the Nutanix API IP here.'
        - macro: '{$NUTANIX.PRISM.ELEMENT.PORT}'
          value: '9440'
          description: 'Set the Nutanix API port here.'
        - macro: '{$NUTANIX.PROXY}'
          description: 'Sets the HTTP proxy value. If this macro is empty, then no proxy is used.'
        - macro: '{$NUTANIX.TIMEOUT}'
          value: 10s
          description: 'API response timeout.'
        - macro: '{$NUTANIX.USER}'
          value: '<Put your API username here>'
          description: 'Nutanix API username.'
      dashboards:
        - uuid: 5764865624cb41abb5ea6631a9b3dd41
          name: 'Nutanix Cluster Prism Element overview'
          pages:
            - name: 'Nutanix Cluster: Overview'
              widgets:
                - type: ITEM
                  name: 'General: Cluster operation mode'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.cluster.operation.mode
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: IOPS
                  'y': '2'
                  width: '18'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: IOPS overview'
                - type: GRAPH_CLASSIC
                  name: IO
                  'y': '7'
                  width: '18'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: IO overview'
                - type: ITEM
                  name: 'General: Version'
                  x: '6'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.general.upgrade.version
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Timespan'
                  x: '12'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.general.timespan.sec
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Current redundancy factor'
                  x: '18'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.redundancy.factor.current
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Desired redundancy factor'
                  x: '18'
                  'y': '2'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.redundancy.factor.desired
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Storage Capacity'
                  x: '18'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: General: Storage capacity'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.general.storage.capacity.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Storage Free'
                  x: '18'
                  'y': '6'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: General: Storage free'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.general.storage.free.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Storage logical usage'
                  x: '18'
                  'y': '8'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: General: Storage logical usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.general.storage.logical.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Storage usage'
                  x: '18'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: General: Storage usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.general.storage.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
            - name: 'Nutanix Cluster: IO'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'General: IOPS'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: General: IOPS'
                - type: GRAPH_CLASSIC
                  name: 'General: Bandwidth'
                  'y': '6'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: General: IO, bandwidth'
                - type: ITEM
                  name: 'General: IOPS'
                  x: '12'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.general.iops
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Read IOPS'
                  x: '12'
                  'y': '2'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.general.iops.read
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Write IOPS'
                  x: '12'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.general.iops.write
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: 'General: Latency'
                  x: '12'
                  'y': '6'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: General: IO, latency'
                - type: GRAPH_CLASSIC
                  name: 'General: Read IO / Write IO'
                  x: '18'
                  width: '6'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: General: Read IO / Write IO'
            - name: 'Nutanix Cluster: Content Cache'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'Content Cache: Memory'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Content Cache: Memory, bytes'
                - type: ITEM
                  name: 'Content Cache: Logical memory usage'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Content Cache: Logical memory usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.content.cache.logical.memory.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: 'Content Cache: SSD usage'
                  'y': '6'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Content Cache: SSD usage, bytes'
                - type: ITEM
                  name: 'Content Cache: Logical SSD usage'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Content Cache: Logical SSD usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.content.cache.logical.ssd.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Logical saved memory usage'
                  x: '6'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Content Cache: Logical saved memory usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.content.cache.saved.memory.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Physical SSD usage'
                  x: '6'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Content Cache: Physical SSD usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.content.cache.physical.ssd.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Physical memory usage'
                  x: '12'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Content Cache: Physical memory usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.content.cache.physical.memory.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Saved SSD usage'
                  x: '12'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Content Cache: Saved SSD usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.content.cache.saved.ssd.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Hit rate'
                  x: '18'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.content.cache.hit.percent
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: 'Content Cache: Hit rate'
                  x: '18'
                  'y': '2'
                  width: '6'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Content Cache: Hit rate, %'
                - type: ITEM
                  name: 'Content Cache: Number of lookups'
                  x: '18'
                  'y': '8'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.content.cache.lookups.num
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: References'
                  x: '18'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.content.cache.dedup.ref.num
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
            - name: 'Nutanix Cluster: Hypervisor'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: IOPS'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Hypervisor: IOPS'
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: Latency'
                  'y': '4'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Hypervisor: IO, latency'
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: Bandwidth'
                  'y': '8'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Hypervisor: IO, bandwidth'
                - type: ITEM
                  name: 'Hypervisor: CPU usage'
                  x: '18'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.hypervisor.cpu.usage.percent
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: CPU usage'
                  x: '18'
                  'y': '2'
                  width: '6'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Hypervisor: CPU usage, %'
                - type: ITEM
                  name: 'Hypervisor: Memory usage'
                  x: '18'
                  'y': '6'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.hypervisor.memory.usage.percent
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: Memory usage'
                  x: '18'
                  'y': '8'
                  width: '6'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Hypervisor: Memory usage, %'
            - name: 'Nutanix Cluster: Storage controller'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'Storage controller: IOPS'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Storage Controller: IOPS'
                - type: GRAPH_CLASSIC
                  name: 'Storage controller: IO'
                  'y': '6'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Storage Controller: IO'
                - type: GRAPH_CLASSIC
                  name: 'Storage controller: Read IO / Write IO'
                  x: '12'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Storage Controller: Read IO / Write IO'
                - type: GRAPH_CLASSIC
                  name: 'Storage controller: Bandwidth'
                  x: '12'
                  'y': '6'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Storage Controller: IO, bandwidth'
            - name: 'Nutanix Cluster: Storage Tier'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'Storage Tier: Das-sata'
                  width: '18'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Storage Tier: Das-sata'
                - type: GRAPH_CLASSIC
                  name: 'Storage Tier: SSD'
                  'y': '6'
                  width: '18'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        name: 'Nutanix Cluster: Storage Tier: SSD'
                - type: ITEM
                  name: 'Storage Tier: Das-sata free'
                  x: '18'
                  width: '6'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Storage Tier: Das-sata free'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.storage.controller.tier.das_sata.free.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Storage Tier: Das-sata usage'
                  x: '18'
                  'y': '3'
                  width: '6'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Storage Tier: Das-sata usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.storage.controller.tier.das_sata.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Storage Tier: SSD free'
                  x: '18'
                  'y': '6'
                  width: '6'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Storage Tier: SSD free'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.storage.controller.tier.ssd.free.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Storage Tier: SSD usage'
                  x: '18'
                  'y': '9'
                  width: '6'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Cluster: Storage Tier: SSD usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Cluster Prism Element by HTTP'
                        key: nutanix.cluster.storage.controller.tier.ssd.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
      valuemaps:
        - uuid: 86e15b9ab1e04285a8db065fbdf6eedf
          name: 'Nutanix: Alert severity'
          mappings:
            - value: '0'
              newvalue: Info
            - value: '1'
              newvalue: Warning
            - value: '2'
              newvalue: Critical
            - value: '3'
              newvalue: Unknown
        - uuid: 079d797917c64626af20ce86249c2969
          name: 'Nutanix: Alert state'
          mappings:
            - value: '0'
              newvalue: Ok
            - value: '1'
              newvalue: Problem
        - uuid: 10ec1428fba54eeaabc6503361090761
          name: 'Nutanix: Boolean'
          mappings:
            - value: '0'
              newvalue: 'False'
            - value: '1'
              newvalue: 'True'
            - value: '2'
              newvalue: Unknown
        - uuid: 537aaf6158724960a2535913030f0138
          name: 'Nutanix: Cluster operation mode'
          mappings:
            - value: '0'
              newvalue: Normal
            - value: '1'
              newvalue: Override
            - value: '2'
              newvalue: Readonly
            - value: '3'
              newvalue: Standalone
            - value: '4'
              newvalue: 'Switch to two node'
            - value: '5'
              newvalue: Unknown
    - uuid: 8ab5387c8887435587cce8383b2fc6c5
      template: 'Nutanix Host Prism Element by HTTP'
      name: 'Nutanix Host Prism Element by HTTP'
      description: |
        Prism Element: It is a service already built into the platform for every Nutanix cluster deployed. It provides the ability to fully configure, manage, and monitor Nutanix clusters running any hypervisors, however, It only manages the cluster it is part of.
        
        This template is designed for the effortless deployment of Nutanix Host Prism Element monitoring and doesn't require any external scripts.
        
        This template can be used in discovery, as well as manually linked to a host - to do so, attach it to the host and manually set the value of the '{$NUTANIX.HOST.UUID}' macro.
        
        More details can be found in the official documentation:
          - on retrieving UUIDs: https://www.nutanixbible.com/19b-cli.html
          - on the Nutanix Prism Element REST API: https://www.nutanix.dev/api_reference/apis/prism_v2.html
          - on differences between Nutanix API versions: https://www.nutanix.dev/api-versions/
        
        Generated by official Zabbix template tool "Templator"
      groups:
        - name: Templates/Applications
      items:
        - uuid: 48c5f1f6ea454fd69756268cd613129e
          name: 'Nutanix Host: Get alert'
          type: SCRIPT
          key: nutanix.host.alert.get
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            var Nutanix = {
            	params: {},
            
            	setParams: function (requiredParams, allParams) {
            		requiredParams.forEach(function (field) {
            			if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            				throw 'Required param is not set: ' + field + '.';
            			}
            		});
            
            		Nutanix.params = params;
            	},
            
            	request: function (url) {
            
            		var request = new HttpRequest();
            
            		if (typeof Nutanix.params.proxy !== 'undefined' && Nutanix.params.proxy !== '') {
            			request.setProxy(Nutanix.params.proxy);
            		}
            
            		request.setHttpAuth(HTTPAUTH_BASIC, Nutanix.params.username, Nutanix.params.password);
            
            		Zabbix.log(4, '[ Nutanix ] Sending request: ' + url);
            
            		const response = request.get(url);
            
            		Zabbix.log(4, '[ Nutanix ] Received response with status code ' + request.getStatus() + ': ' + response);
            
            		if (request.getStatus() < 200 || request.getStatus() >= 300) {
            			throw 'Request failed with status code ' + request.getStatus() + ': ' + response;
            		}
            
            		try {
            			response = JSON.parse(response);
            		}
            		catch (error) {
            			throw 'Failed to parse response received from Nutanix PRISM API. Check debug log for more information.';
            		}
            
            		return response;
            	},
            
            	deduplicateAlerts: function (full_data) {
            		const severity_mapping = [
            			'kinfo',
            			'kwarning',
            			'kcritical'
            		]
            
            		var output_data = {};
            		for (var entity in full_data.entities) {
            	
            			if (Nutanix.params.api_method === 'clusters') {
            				if (result.entities[entity].node_uuid.split('-').length == 5) continue;
            			}
            
            			var severity = severity_mapping.indexOf(full_data.entities[entity].severity.toLowerCase()),
            				message = full_data.entities[entity].message,
            				title = full_data.entities[entity].alert_title;
            	
            			full_data.entities[entity].context_types.forEach(function(context, index) {
            				message = message.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            				title = title.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            			});
            	
            			key = md5(title + message);
            			if (key in output_data) {
            				if (full_data.entities[entity].created_time_stamp_in_usecs > output_data[key].created) {
            					output_data[key].created = full_data.entities[entity].created_time_stamp_in_usecs;
            					output_data[key].severity = severity !== -1 ? severity : 3;
            					output_data[key].state = full_data.entities[entity].resolved ? 0 : 1;
            					output_data[key].message = full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message;
            					output_data[key].last_id = full_data.entities[entity].id;
            				}
            				output_data[key].count += 1;
            			} else {
            				output_data[key] = {
            					"name": title + ' - ' + message,
            					"title": title != '' ? title : message,
            					"created": full_data.entities[entity].created_time_stamp_in_usecs,
            					"severity": severity !== -1 ? severity : 3,
            					"state": full_data.entities[entity].resolved ? 0 : 1,
            					"message": full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message,
            					"last_id": full_data.entities[entity].id,
            					"count": 1
            				}
            			}
            		}
            
            		return output_data;
            	},
            
            	cleanUnsupported: function (full_stat) {
            		var output_stat = {};
            		for (var element in full_stat) {
            			if (full_stat[element] !== '-1') {
            				output_stat[element] = full_stat[element];
            			}
            		};
            		
            		return output_stat;
            	}
            };
            
            try {
            	const params = JSON.parse(value);
            	Nutanix.setParams(['endpoint_host', 'endpoint_port', 'username', 'password', 'auth_type', 'api_method', 'target_uuid'], params);
            
            	const url = 'https://' + Nutanix.params.endpoint_host + ':' + Nutanix.params.endpoint_port + '/PrismGateway/services/rest/v2.0/' + Nutanix.params.api_method + '/' + Nutanix.params.target_uuid + '/alerts',
            		result = Nutanix.request(url);
            
            	return JSON.stringify(Nutanix.deduplicateAlerts(result));
            }
            catch (error) {
            	error += (String(error).endsWith('.')) ? '' : '.';
            	Zabbix.log(4, '[ Nutanix ] ERROR: ' + error);
            
            	return JSON.stringify({ 'error': error });
            }
            
          description: 'Get data about alerts.'
          timeout: '{$NUTANIX.TIMEOUT}'
          parameters:
            - name: api_method
              value: hosts
            - name: auth_type
              value: basic
            - name: endpoint_host
              value: '{$NUTANIX.PRISM.ELEMENT.IP}'
            - name: endpoint_port
              value: '{$NUTANIX.PRISM.ELEMENT.PORT}'
            - name: password
              value: '{$NUTANIX.PASSWORD}'
            - name: proxy
              value: '{$NUTANIX.PROXY}'
            - name: target_uuid
              value: '{$NUTANIX.HOST.UUID}'
            - name: username
              value: '{$NUTANIX.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: fe2d1588c8df4d0e83bf35029a8c0811
          name: 'Nutanix Host: Get alert check'
          type: DEPENDENT
          key: nutanix.host.alert.get.check
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          description: 'Data collection check. Check the latest values for details.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.error
              error_handler: CUSTOM_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: nutanix.host.alert.get
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: 6dbb467d463e47dca35970591ef1446f
              expression: 'length(last(/Nutanix Host Prism Element by HTTP/nutanix.host.alert.get.check))>0'
              name: 'Nutanix Host: Failed to get alert data from the API'
              priority: HIGH
              description: 'Failed to get data from the API. Check the latest values for details.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 6b23ddc5bc4149cbbef4feb729ddd7d2
          name: 'Nutanix Host: Content Cache: References'
          type: DEPENDENT
          key: nutanix.host.content.cache.dedup.ref.num
          delay: '0'
          history: 7d
          description: 'Average number of content cache references.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_num_dedup_ref_count_pph
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: f350acf8979145aca8bff3c26454e2b9
          name: 'Nutanix Host: Content Cache: Hit rate, %'
          type: DEPENDENT
          key: nutanix.host.content.cache.hit.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Content cache hits over all lookups.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_hit_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 669e026614974b378306a4ce65b67ffb
          name: 'Nutanix Host: Content Cache: Logical memory usage, bytes'
          type: DEPENDENT
          key: nutanix.host.content.cache.logical.memory.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Logical memory used to cache data without deduplication in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_logical_memory_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: 7d8e81cd62d6458a99db1d7aad0f229d
          name: 'Nutanix Host: Content Cache: Logical SSD usage, bytes'
          type: DEPENDENT
          key: nutanix.host.content.cache.logical.ssd.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Logical SSD memory used to cache data without deduplication in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_logical_ssd_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: 8589d38473b04d06a3a7f58dc2513560
          name: 'Nutanix Host: Content Cache: Number of lookups'
          type: DEPENDENT
          key: nutanix.host.content.cache.lookups.num
          delay: '0'
          history: 7d
          description: 'Number of lookups on the content cache.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_num_lookups
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 36d0c74bfc3040a68516276e5ce763ac
          name: 'Nutanix Host: Content Cache: Physical memory usage, bytes'
          type: DEPENDENT
          key: nutanix.host.content.cache.physical.memory.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Real memory used to cache data via the content cache in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_physical_memory_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: bc4d165f550f4921ab6b2a622b3c1973
          name: 'Nutanix Host: Content Cache: Physical SSD usage, bytes'
          type: DEPENDENT
          key: nutanix.host.content.cache.physical.ssd.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Real SSD usage used to cache data via the content cache in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_physical_ssd_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: 397007975419415eb70ffe0276cff446
          name: 'Nutanix Host: Content Cache: Logical saved memory usage, bytes'
          type: DEPENDENT
          key: nutanix.host.content.cache.saved.memory.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Memory saved due to content cache deduplication in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_saved_memory_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: 7e25d096fc094f0987d4009efe2074ec
          name: 'Nutanix Host: Content Cache: Saved SSD usage, bytes'
          type: DEPENDENT
          key: nutanix.host.content.cache.saved.ssd.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'SSD usage saved due to content cache deduplication in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.content_cache_saved_ssd_usage_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
            - tag: component
              value: memory
        - uuid: 634b72675f5346079d4f3c962a3316b9
          name: 'Nutanix Host: Controller: Random IO'
          type: DEPENDENT
          key: nutanix.host.controller.io.random
          delay: '0'
          history: 7d
          description: 'The number of random Input/Output operations from the controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_random_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: d51746d0f49a4631930f7200543254dd
          name: 'Nutanix Host: Controller: Random IO, %'
          type: DEPENDENT
          key: nutanix.host.controller.io.random.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of random Input/Output from the controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_random_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 4df61338cb7e4044b029187665103b3e
          name: 'Nutanix Host: Controller: Sequence IO'
          type: DEPENDENT
          key: nutanix.host.controller.io.sequence
          delay: '0'
          history: 7d
          description: 'The number of sequential Input/Output operations from the controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_seq_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 946f9ef792c547edb275c7ad08532278
          name: 'Nutanix Host: Controller: Sequence IO, %'
          type: DEPENDENT
          key: nutanix.host.controller.io.sequence.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of sequential Input/Output from the controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_seq_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: a3a11c42c9da4eecb0aefa20792d4514
          name: 'Nutanix Host: Get disk'
          type: SCRIPT
          key: nutanix.host.disk.get
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            var Nutanix = {
            	params: {},
            
            	setParams: function (requiredParams, allParams) {
            		requiredParams.forEach(function (field) {
            			if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            				throw 'Required param is not set: ' + field + '.';
            			}
            		});
            
            		Nutanix.params = params;
            	},
            
            	request: function (url) {
            
            		var request = new HttpRequest();
            
            		if (typeof Nutanix.params.proxy !== 'undefined' && Nutanix.params.proxy !== '') {
            			request.setProxy(Nutanix.params.proxy);
            		}
            
            		request.setHttpAuth(HTTPAUTH_BASIC, Nutanix.params.username, Nutanix.params.password);
            
            		Zabbix.log(4, '[ Nutanix ] Sending request: ' + url);
            
            		const response = request.get(url);
            
            		Zabbix.log(4, '[ Nutanix ] Received response with status code ' + request.getStatus() + ': ' + response);
            
            		if (request.getStatus() < 200 || request.getStatus() >= 300) {
            			throw 'Request failed with status code ' + request.getStatus() + ': ' + response;
            		}
            
            		try {
            			response = JSON.parse(response);
            		}
            		catch (error) {
            			throw 'Failed to parse response received from Nutanix PRISM API. Check debug log for more information.';
            		}
            
            		return response;
            	},
            
            	deduplicateAlerts: function (full_data) {
            		const severity_mapping = [
            			'kinfo',
            			'kwarning',
            			'kcritical'
            		]
            
            		var output_data = {};
            		for (var entity in full_data.entities) {
            	
            			if (Nutanix.params.api_method === 'clusters') {
            				if (result.entities[entity].node_uuid.split('-').length == 5) continue;
            			}
            
            			var severity = severity_mapping.indexOf(full_data.entities[entity].severity.toLowerCase()),
            				message = full_data.entities[entity].message,
            				title = full_data.entities[entity].alert_title;
            	
            			full_data.entities[entity].context_types.forEach(function(context, index) {
            				message = message.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            				title = title.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            			});
            	
            			key = md5(title + message);
            			if (key in output_data) {
            				if (full_data.entities[entity].created_time_stamp_in_usecs > output_data[key].created) {
            					output_data[key].created = full_data.entities[entity].created_time_stamp_in_usecs;
            					output_data[key].severity = severity !== -1 ? severity : 3;
            					output_data[key].state = full_data.entities[entity].resolved ? 0 : 1;
            					output_data[key].message = full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message;
            					output_data[key].last_id = full_data.entities[entity].id;
            				}
            				output_data[key].count += 1;
            			} else {
            				output_data[key] = {
            					"name": title + ' - ' + message,
            					"title": title != '' ? title : message,
            					"created": full_data.entities[entity].created_time_stamp_in_usecs,
            					"severity": severity !== -1 ? severity : 3,
            					"state": full_data.entities[entity].resolved ? 0 : 1,
            					"message": full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message,
            					"last_id": full_data.entities[entity].id,
            					"count": 1
            				}
            			}
            		}
            
            		return output_data;
            	},
            
            	cleanUnsupported: function (full_stat) {
            		var output_stat = {};
            		for (var element in full_stat) {
            			if (full_stat[element] !== '-1') {
            				output_stat[element] = full_stat[element];
            			}
            		};
            		
            		return output_stat;
            	}
            };
            
            try {
            	const params = JSON.parse(value);
            	Nutanix.setParams(['endpoint_host', 'endpoint_port', 'username', 'password', 'auth_type', 'api_method', 'target_uuid'], params);
            
            	const url = 'https://' + Nutanix.params.endpoint_host + ':' + Nutanix.params.endpoint_port + '/PrismGateway/services/rest/v2.0/' + Nutanix.params.api_method + '?search_attribute_list=node_uuid&search_string=' + Nutanix.params.target_uuid,
            		result = Nutanix.request(url);
            
            	var output_data = {};
            	for (var entity in result.entities) {
            		output_data[result.entities[entity].id] = result.entities[entity]
            	}
            
            	return JSON.stringify(output_data);
            }
            catch (error) {
            	error += (String(error).endsWith('.')) ? '' : '.';
            	Zabbix.log(4, '[ Nutanix ] ERROR: ' + error);
            
            	return JSON.stringify({ 'error': error });
            }
            
          description: 'Get data about installed disks.'
          timeout: '{$NUTANIX.TIMEOUT}'
          parameters:
            - name: api_method
              value: disks
            - name: auth_type
              value: basic
            - name: endpoint_host
              value: '{$NUTANIX.PRISM.ELEMENT.IP}'
            - name: endpoint_port
              value: '{$NUTANIX.PRISM.ELEMENT.PORT}'
            - name: password
              value: '{$NUTANIX.PASSWORD}'
            - name: proxy
              value: '{$NUTANIX.PROXY}'
            - name: target_uuid
              value: '{$NUTANIX.HOST.UUID}'
            - name: username
              value: '{$NUTANIX.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: 28d0f61d06f24eb39af718e213c68d87
          name: 'Nutanix Host: Get disk check'
          type: DEPENDENT
          key: nutanix.host.disk.get.check
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          description: 'Data collection check. Check the latest values for details.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.error
              error_handler: CUSTOM_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: nutanix.host.disk.get
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: a105b91b5d48438b93abc257b238e2c9
              expression: 'length(last(/Nutanix Host Prism Element by HTTP/nutanix.host.disk.get.check))>0'
              name: 'Nutanix Host: Failed to get disk data from the API'
              priority: HIGH
              description: 'Failed to get data from the API. Check the latest values for details.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 0931721d1a3943649344315e2de7f39f
          name: 'Nutanix Host: General: Boot time'
          type: DEPENDENT
          key: nutanix.host.general.boot.time
          delay: '0'
          history: 7d
          units: unixtime
          description: 'The last host boot time.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.boot_time_in_usecs
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 15b33f72661e4d5180460966d11a71d0
          name: 'Nutanix Host: General: Total CPU capacity'
          type: DEPENDENT
          key: nutanix.host.general.cpu.capacity.hz
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Hz
          description: 'Total host CPU capacity in Hz.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.cpu_capacity_in_hz
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: cpu
        - uuid: 7d17333b18c94a37a34b5390969f2832
          name: 'Nutanix Host: General: CPU frequency'
          type: DEPENDENT
          key: nutanix.host.general.cpu.frequency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: Hz
          description: 'The processor frequency.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.cpu_frequency_in_hz
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: cpu
        - uuid: c2c0f753b64f43aabd199fd4b3bf4182
          name: 'Nutanix Host: General: CPU model'
          type: DEPENDENT
          key: nutanix.host.general.cpu.model
          delay: '0'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: 'The processor model.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.cpu_model
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: cpu
        - uuid: a7d620e525264ccfa790f6b4f46591f1
          name: 'Nutanix Host: General: Degrade status'
          type: DEPENDENT
          key: nutanix.host.general.degraded
          delay: '0'
          history: 7d
          description: |
            Indicates whether the host is in a degraded state. One of the following:
            - Normal;
            - Degraded;
            - Unknown.
          valuemap:
            name: 'Nutanix: Degraded state'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.is_degraded
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
              error_handler: CUSTOM_VALUE
              error_handler_params: '2'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: health
          triggers:
            - uuid: f10f4b560bd140cabb3beb4ee1dbbf78
              expression: 'last(/Nutanix Host Prism Element by HTTP/nutanix.host.general.degraded)=1'
              name: 'Nutanix Host: Host is in degraded status'
              priority: HIGH
              description: 'Host is in a degraded status. The host may soon become unavailable.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 4b4eb846e4de4461a02d1d24fbcadef1
          name: 'Nutanix Host: General: IO'
          type: DEPENDENT
          key: nutanix.host.general.io
          delay: '0'
          history: 7d
          description: 'The number of Input/Output operations from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_io
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: e0ab22c1d8aa49dc9625ba4876e6a7c2
          name: 'Nutanix Host: General: IO, bandwidth'
          type: DEPENDENT
          key: nutanix.host.general.io.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Data transferred in B/sec from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 4094ad4a8d3a4e0a818fadc78f612f54
          name: 'Nutanix Host: General: IO, latency'
          type: DEPENDENT
          key: nutanix.host.general.io.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output latency from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.avg_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 80245fcfc1554a178d1a636c9356da77
          name: 'Nutanix Host: General: Random IO'
          type: DEPENDENT
          key: nutanix.host.general.io.random
          delay: '0'
          history: 7d
          description: 'The number of random Input/Output operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_random_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: fcbabfd55e37442b85913f7efdabab91
          name: 'Nutanix Host: General: Random IO, %'
          type: DEPENDENT
          key: nutanix.host.general.io.random.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of random Input/Output.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.random_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 9f57e588e1e94101aadfbf1cdd42f45b
          name: 'Nutanix Host: General: Read IO'
          type: DEPENDENT
          key: nutanix.host.general.io.read
          delay: '0'
          history: 7d
          description: 'Input/Output read operations from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_read_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 98f8336a92cb4096b5edddf190bacab2
          name: 'Nutanix Host: General: Read IO, bandwidth'
          type: DEPENDENT
          key: nutanix.host.general.io.read.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Read data transferred in B/sec from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.read_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: bd84805286354e94b5f36a469c4840ae
          name: 'Nutanix Host: General: Read IO, latency'
          type: DEPENDENT
          key: nutanix.host.general.io.read.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Average Input/Output read latency.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.avg_read_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: b3e69532f2064ffba9282f3006b2b995
          name: 'Nutanix Host: General: Read IO, %'
          type: DEPENDENT
          key: nutanix.host.general.io.read.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The total percentage of Input/Output operations that are reads.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.read_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 9ff70ba2c78145b7a34d6d1c01a0305f
          name: 'Nutanix Host: General: IO total read, bytes'
          type: DEPENDENT
          key: nutanix.host.general.io.read.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total size of Input/Output read operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_read_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 68e37c5e0ecf4d32bb9d8bff4fbc860d
          name: 'Nutanix Host: General: IO total read, sec'
          type: DEPENDENT
          key: nutanix.host.general.io.read.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total time of Input/Output read operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_read_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 1685e6e8655d4b438d9a62057413360b
          name: 'Nutanix Host: General: Sequence IO'
          type: DEPENDENT
          key: nutanix.host.general.io.sequence
          delay: '0'
          history: 7d
          description: 'The number of sequential Input/Output operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_seq_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 67c05bbcbe564fe894d4f0c630b0df36
          name: 'Nutanix Host: General: Sequence IO, %'
          type: DEPENDENT
          key: nutanix.host.general.io.sequence.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'The percentage of sequential Input/Output.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.seq_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 6b2b1a101c284ccca77001c24296913b
          name: 'Nutanix Host: General: IO total, bytes'
          type: DEPENDENT
          key: nutanix.host.general.io.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total size of Input/Output operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 31ec053fb9074612aec2f390c3297922
          name: 'Nutanix Host: General: IO total, sec'
          type: DEPENDENT
          key: nutanix.host.general.io.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total time of Input/Output operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 6a84248e84474c7fb5f43f002d5c8184
          name: 'Nutanix Host: General: Write IO'
          type: DEPENDENT
          key: nutanix.host.general.io.write
          delay: '0'
          history: 7d
          description: 'Total number of Input/Output write operations.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_write_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 01da29a48ad844dda87220bdf51fc49b
          name: 'Nutanix Host: General: Write IO, bandwidth'
          type: DEPENDENT
          key: nutanix.host.general.io.write.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Write data transferred in B/sec from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.write_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: dfa5a832da96436ab36adb2ce5c427a7
          name: 'Nutanix Host: General: Write IO, latency'
          type: DEPENDENT
          key: nutanix.host.general.io.write.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Average Input/Output write operation latency.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.avg_write_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 1b46f733b32b401f820817ce10923f7c
          name: 'Nutanix Host: General: Write IO, %'
          type: DEPENDENT
          key: nutanix.host.general.io.write.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Total percentage of Input/Output operations that are writes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.write_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: d8760935333d464993158e756b5dc242
          name: 'Nutanix Host: General: IOPS'
          type: DEPENDENT
          key: nutanix.host.general.iops
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output operations per second from the disk.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: fd34deb2093943c6b4f4ce5494e66b97
          name: 'Nutanix Host: General: Read IOPS'
          type: DEPENDENT
          key: nutanix.host.general.iops.read
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Total number of Input/Output read operations per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_read_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 2be54532725d4286b0f2f5427fa77087
          name: 'Nutanix Host: General: Write IOPS'
          type: DEPENDENT
          key: nutanix.host.general.iops.write
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '!iops'
          description: 'Total number of Input/Output operations write per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.num_write_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: fa448c5009ca461baf2973f6c3c65a72
          name: 'Nutanix Host: General: Maintenance mode'
          type: DEPENDENT
          key: nutanix.host.general.maintenance
          delay: '0'
          history: 7d
          description: |
            Indicates whether the host is in maintenance mode. One of the following:
            - Normal;
            - Maintenance;
            - Unknown.
          valuemap:
            name: 'Nutanix: Maintenance mode'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.host_in_maintenance_mode
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
              error_handler: CUSTOM_VALUE
              error_handler_params: '2'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 19f7001acc8e45c49b6d5734322ee05d
          name: 'Nutanix Host: General: Total memory, bytes'
          type: DEPENDENT
          key: nutanix.host.general.memory.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total host memory in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.memory_capacity_in_bytes
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: memory
        - uuid: e67d32de7523428d959c29a653a0647b
          name: 'Nutanix Host: General: Reboot pending'
          type: DEPENDENT
          key: nutanix.host.general.reboot
          delay: '0'
          history: 7d
          description: 'Indicates whether the host is pending to reboot.'
          valuemap:
            name: 'Nutanix: Boolean'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.reboot_pending
            - type: BOOL_TO_DECIMAL
              parameters:
                - ''
              error_handler: CUSTOM_VALUE
              error_handler_params: '2'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: eee1f5f4f68a44ea8cfbb409370b0f80
          name: 'Nutanix Host: General: Host state'
          type: DEPENDENT
          key: nutanix.host.general.state
          delay: '0'
          history: 7d
          description: |
            Displays the host state. One of the following:
            - NEW;
            - NORMAL;
            - MARKED_FOR_REMOVAL_BUT_NOT_DETACHABLE;
            - DETACHABLE.
          valuemap:
            name: 'Nutanix: Host state'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.state
            - type: JAVASCRIPT
              parameters:
                - |
                  const idx = [
                    'NEW',
                    'NORMAL',
                    'MARKED_FOR_REMOVAL_BUT_NOT_DETACHABLE',
                    'DETACHABLE'
                  ].indexOf(value.toUpperCase());
                  return idx !== -1 ? idx : 4;
                  
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 2e52146c43cd46cba3ad350528e5c277
          name: 'Nutanix Host: General: Storage capacity, bytes'
          type: DEPENDENT
          key: nutanix.host.general.storage.capacity.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total size of the datastores used by this system in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage.capacity_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 7917e0babb4b433da73a3d8f5a872bd1
          name: 'Nutanix Host: General: Storage free, bytes'
          type: DEPENDENT
          key: nutanix.host.general.storage.free.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total free space of all the datastores used by this system in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage.free_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 51be63c3691049a683be08546387ab7a
          name: 'Nutanix Host: General: Storage logical usage, bytes'
          type: DEPENDENT
          key: nutanix.host.general.storage.logical.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total logical used space by the datastores of this system in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage.logical_usage_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: ca11026b4f3e411588eea1eab0c8c299
          name: 'Nutanix Host: General: Storage usage, bytes'
          type: DEPENDENT
          key: nutanix.host.general.storage.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total physical datastore space used by this host and all its snapshots on the datastores.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage.usage_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: c603fce582d64d5abe2f5863640c9f58
          name: 'Nutanix Host: General: Timespan, sec'
          type: DEPENDENT
          key: nutanix.host.general.timespan.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Host timespan.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.timespan_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 229e67e4300143a5b1ff1f5e0738785f
          name: 'Nutanix Host: General: Total transformed usage, bytes'
          type: DEPENDENT
          key: nutanix.host.general.transformed.usage.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Actual usage of storage.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_transformed_usage_bytes
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 653f6d1b6e2d47e3a3c44406b7d6de11
          name: 'Nutanix Host: General: Host type'
          type: DEPENDENT
          key: nutanix.host.general.type
          delay: '0'
          history: 7d
          description: |
            Displays the host type. One of the following:
            - HYPER_CONVERGED;
            - COMPUTE_ONLY.
          valuemap:
            name: 'Nutanix: Host type'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.host_type
            - type: JAVASCRIPT
              parameters:
                - |
                  const idx = [
                    'HYPER_CONVERGED',
                    'COMPUTE_ONLY'
                  ].indexOf(value.toUpperCase());
                  return idx !== -1 ? idx : 2;
                  
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: b46931e9874342bb9071170235db1523
          name: 'Nutanix Host: General: Total untransformed usage, bytes'
          type: DEPENDENT
          key: nutanix.host.general.untransformed.usage.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Logical usage of storage (physical usage divided by the replication factor).'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.total_untransformed_usage_bytes
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 044d58d7c3394f6fa62dd6390218f5ea
          name: 'Nutanix Host: General: Number of virtual machines'
          type: DEPENDENT
          key: nutanix.host.general.vms.num
          delay: '0'
          history: 7d
          description: 'Number of virtual machines running on this host.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.num_vms
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 52aa85553198433298dbbac196ebf66a
          name: 'Nutanix Host: Hypervisor: Number of CPU cores'
          type: DEPENDENT
          key: nutanix.host.hypervisor.cpu.cores.num
          delay: '0'
          history: 7d
          description: 'The number of CPU cores.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.num_cpu_cores
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: cpu
        - uuid: fc3b3850f7c4440cb9ff50194204e68f
          name: 'Nutanix Host: Hypervisor: Number of CPU sockets'
          type: DEPENDENT
          key: nutanix.host.hypervisor.cpu.sockets.num
          delay: '0'
          history: 7d
          description: 'The number of CPU sockets.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.num_cpu_sockets
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: cpu
        - uuid: 674aff8c3c764f1aa9571789f3c8d938
          name: 'Nutanix Host: Hypervisor: Number of CPU threads'
          type: DEPENDENT
          key: nutanix.host.hypervisor.cpu.threads.num
          delay: '0'
          history: 7d
          description: 'The number of CPU threads.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.num_cpu_threads
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: cpu
        - uuid: a7153c897dd64d0a9b523401380d5074
          name: 'Nutanix Host: Hypervisor: CPU usage, %'
          type: DEPENDENT
          key: nutanix.host.hypervisor.cpu.usage.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Percentage of CPU used by the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_cpu_usage_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: cpu
        - uuid: 9b943b7fbdb14ea88a755c048dbcd42d
          name: 'Nutanix Host: Hypervisor: IO'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io
          delay: '0'
          history: 7d
          value_type: FLOAT
          description: 'The number of Input/Output operations from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: d3c5c2f3aac9497c82db53b22fef99bc
          name: 'Nutanix Host: Hypervisor: IO, bandwidth'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Data transferred in B/sec from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: fdc056be2fa34e84aa801e0dd1c27f2c
          name: 'Nutanix Host: Hypervisor: IO, latency'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output operation latency from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_avg_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 34b8a6a9dff44c858cff7762f8f6f129
          name: 'Nutanix Host: Hypervisor: Read IO'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.read
          delay: '0'
          history: 7d
          description: 'Input/Output read operations per second from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_read_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 3ab152f1c0534e90b9c84ed56e8f6522
          name: 'Nutanix Host: Hypervisor: Read IO, bandwidth'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.read.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Read data transferred in B/sec from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_read_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: d8a7b7a2090a4b81947c2b0043b15460
          name: 'Nutanix Host: Hypervisor: Read IO, latency'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.read.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output read latency from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_avg_read_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 7d8e8c00ced846a4b214123a5c11b6ba
          name: 'Nutanix Host: Hypervisor: IO total read, bytes'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.read.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total size of Input/Output read operations from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_total_read_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 7cc44b50da26404a8a95a94f9640e259
          name: 'Nutanix Host: Hypervisor: IO total read, sec'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.read.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total time of Input/Output read operations from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_total_read_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 4f2081e28140438d94103dd709f45d9a
          name: 'Nutanix Host: Hypervisor: IO total, bytes'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total Input/Output operation size from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_total_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 08a7564943fd4d608b5b57299ca52956
          name: 'Nutanix Host: Hypervisor: IO total, sec'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total Input/Output operation time from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_total_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 6678f0f027274409b44a879e22bc2255
          name: 'Nutanix Host: Hypervisor: Write IO'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.write
          delay: '0'
          history: 7d
          description: 'Input/Output write operations from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_write_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 80514bb25ca54a789da233349b98d4bc
          name: 'Nutanix Host: Hypervisor: Write IO, bandwidth'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.write.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Write data transferred in B/sec from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_write_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 113e7fbd52e64d628275a2246f9b1572
          name: 'Nutanix Host: Hypervisor: Write IO, latency'
          type: DEPENDENT
          key: nutanix.host.hypervisor.io.write.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output write latency from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_avg_write_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 5bffd28af1c64bff97e923551621bc75
          name: 'Nutanix Host: Hypervisor: IOPS'
          type: DEPENDENT
          key: nutanix.host.hypervisor.iops
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output operations per second from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: b60f8c87b1484087835e1157895a9230
          name: 'Nutanix Host: Hypervisor: Read IOPS'
          type: DEPENDENT
          key: nutanix.host.hypervisor.iops.read
          delay: '0'
          history: 7d
          description: 'The number of Input/Output read operations from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_read_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 0dc0d5c57c4044cb8a60b0f145960cde
          name: 'Nutanix Host: Hypervisor: Write IOPS'
          type: DEPENDENT
          key: nutanix.host.hypervisor.iops.write
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output write operations per second from the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_write_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 6cea713941644a389591598d0a17ab9a
          name: 'Nutanix Host: Hypervisor: Memory usage, %'
          type: DEPENDENT
          key: nutanix.host.hypervisor.memory.usage.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Percentage of memory used by the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_memory_usage_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: memory
        - uuid: 3e8cb0f5766b4e8cb392ed652da8c19a
          name: 'Nutanix Host: Hypervisor: Full name'
          type: DEPENDENT
          key: nutanix.host.hypervisor.name
          delay: '0'
          history: 7d
          trends: '0'
          value_type: CHAR
          description: 'Full name of the Hypervisor running on the host.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.hypervisor_full_name
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 083f7f4c56fa4e10bf90341d59cfc571
          name: 'Nutanix Host: Hypervisor: Received, bytes'
          type: DEPENDENT
          key: nutanix.host.hypervisor.received.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Bytes received over the network reported by the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_received_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: network
        - uuid: d99a423ebf124816ba85a2493500004c
          name: 'Nutanix Host: Hypervisor: Timespan, sec'
          type: DEPENDENT
          key: nutanix.host.hypervisor.timespan.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Hypervisor timespan.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_timespan_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: application
        - uuid: 7aeaafc3ac174692ad9b65ee1afc54f0
          name: 'Nutanix Host: Hypervisor: Transmitted, bytes'
          type: DEPENDENT
          key: nutanix.host.hypervisor.transmitted.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Bytes transmitted over the network reported by the Hypervisor.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.hypervisor_num_transmitted_bytes
              error_handler: DISCARD_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: network
        - uuid: 30b4da75a8f54b5385310b43fa6a2a7a
          name: 'Nutanix Host: Get metric'
          type: SCRIPT
          key: nutanix.host.metric.get
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            var Nutanix = {
            	params: {},
            
            	setParams: function (requiredParams, allParams) {
            		requiredParams.forEach(function (field) {
            			if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            				throw 'Required param is not set: ' + field + '.';
            			}
            		});
            
            		Nutanix.params = params;
            	},
            
            	request: function (url) {
            
            		var request = new HttpRequest();
            
            		if (typeof Nutanix.params.proxy !== 'undefined' && Nutanix.params.proxy !== '') {
            			request.setProxy(Nutanix.params.proxy);
            		}
            
            		request.setHttpAuth(HTTPAUTH_BASIC, Nutanix.params.username, Nutanix.params.password);
            
            		Zabbix.log(4, '[ Nutanix ] Sending request: ' + url);
            
            		const response = request.get(url);
            
            		Zabbix.log(4, '[ Nutanix ] Received response with status code ' + request.getStatus() + ': ' + response);
            
            		if (request.getStatus() < 200 || request.getStatus() >= 300) {
            			throw 'Request failed with status code ' + request.getStatus() + ': ' + response;
            		}
            
            		try {
            			response = JSON.parse(response);
            		}
            		catch (error) {
            			throw 'Failed to parse response received from Nutanix PRISM API. Check debug log for more information.';
            		}
            
            		return response;
            	},
            
            	deduplicateAlerts: function (full_data) {
            		const severity_mapping = [
            			'kinfo',
            			'kwarning',
            			'kcritical'
            		]
            
            		var output_data = {};
            		for (var entity in full_data.entities) {
            	
            			if (Nutanix.params.api_method === 'clusters') {
            				if (result.entities[entity].node_uuid.split('-').length == 5) continue;
            			}
            
            			var severity = severity_mapping.indexOf(full_data.entities[entity].severity.toLowerCase()),
            				message = full_data.entities[entity].message,
            				title = full_data.entities[entity].alert_title;
            	
            			full_data.entities[entity].context_types.forEach(function(context, index) {
            				message = message.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            				title = title.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            			});
            	
            			key = md5(title + message);
            			if (key in output_data) {
            				if (full_data.entities[entity].created_time_stamp_in_usecs > output_data[key].created) {
            					output_data[key].created = full_data.entities[entity].created_time_stamp_in_usecs;
            					output_data[key].severity = severity !== -1 ? severity : 3;
            					output_data[key].state = full_data.entities[entity].resolved ? 0 : 1;
            					output_data[key].message = full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message;
            					output_data[key].last_id = full_data.entities[entity].id;
            				}
            				output_data[key].count += 1;
            			} else {
            				output_data[key] = {
            					"name": title + ' - ' + message,
            					"title": title != '' ? title : message,
            					"created": full_data.entities[entity].created_time_stamp_in_usecs,
            					"severity": severity !== -1 ? severity : 3,
            					"state": full_data.entities[entity].resolved ? 0 : 1,
            					"message": full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message,
            					"last_id": full_data.entities[entity].id,
            					"count": 1
            				}
            			}
            		}
            
            		return output_data;
            	},
            
            	cleanUnsupported: function (full_stat) {
            		var output_stat = {};
            		for (var element in full_stat) {
            			if (full_stat[element] !== '-1') {
            				output_stat[element] = full_stat[element];
            			}
            		};
            		
            		return output_stat;
            	}
            };
            
            try {
            	const params = JSON.parse(value);
            	Nutanix.setParams(['endpoint_host', 'endpoint_port', 'username', 'password', 'auth_type', 'api_method', 'target_uuid'], params);
            
            	const url = 'https://' + Nutanix.params.endpoint_host + ':' + Nutanix.params.endpoint_port + '/PrismGateway/services/rest/v2.0/' + Nutanix.params.api_method + '/' + Nutanix.params.target_uuid;
            	var result = Nutanix.request(url);
            
            	result.stats = Nutanix.cleanUnsupported(result.stats);
            
            	return JSON.stringify(result);
            }
            catch (error) {
            	error += (String(error).endsWith('.')) ? '' : '.';
            	Zabbix.log(4, '[ Nutanix ] ERROR: ' + error);
            
            	return JSON.stringify({ 'error': error });
            }
            
          description: 'Get data about basic metrics.'
          timeout: '{$NUTANIX.TIMEOUT}'
          parameters:
            - name: api_method
              value: hosts
            - name: auth_type
              value: basic
            - name: endpoint_host
              value: '{$NUTANIX.PRISM.ELEMENT.IP}'
            - name: endpoint_port
              value: '{$NUTANIX.PRISM.ELEMENT.PORT}'
            - name: password
              value: '{$NUTANIX.PASSWORD}'
            - name: proxy
              value: '{$NUTANIX.PROXY}'
            - name: target_uuid
              value: '{$NUTANIX.HOST.UUID}'
            - name: username
              value: '{$NUTANIX.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: 762928864e674745820593499facb776
          name: 'Nutanix Host: Get metric check'
          type: DEPENDENT
          key: nutanix.host.metric.get.check
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          description: 'Data collection check. Check the latest values for details.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.error
              error_handler: CUSTOM_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: f23095d512e845ae846a2b774b97de51
              expression: 'length(last(/Nutanix Host Prism Element by HTTP/nutanix.host.metric.get.check))>0'
              name: 'Nutanix Host: Failed to get metric data from the API'
              priority: HIGH
              description: 'Failed to get data from the API. Check the latest values for details.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 9d0f46350adc468ca4160b7a7e7e85a6
          name: 'Nutanix Host: Storage Controller: IO'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io
          delay: '0'
          history: 7d
          description: 'Input/Output operations from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: f927375ff1394485922c56df0146d17b
          name: 'Nutanix Host: Storage Controller: IO, bandwidth'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Data transferred in B/sec from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 1c92602ab01b4a43a554bca63bc251ed
          name: 'Nutanix Host: Storage Controller: IO, latency'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output latency from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 2811d78caec14a3fbec0e75983399677
          name: 'Nutanix Host: Storage Controller: Read IO'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.read
          delay: '0'
          history: 7d
          description: 'Input/Output read operations from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_read_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 7f10496163da4c13a638c99ced62384d
          name: 'Nutanix Host: Storage Controller: Read IO, bandwidth'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.read.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Read data transferred in B/sec from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_read_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 52f5ed73efa74dc8aaa308a1120b3c1d
          name: 'Nutanix Host: Storage Controller: Read IO, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.read.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Storage Controller average read Input/Output in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_read_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: ed5f0d67b7814aab8233693a60432726
          name: 'Nutanix Host: Storage Controller: Read IO, latency'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.read.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output read latency from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_read_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 1f5ddc62861f44c6bd3de302805b490d
          name: 'Nutanix Host: Storage Controller: Read IO, %'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.read.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Percentage of Input/Output operations from the Storage Controller that are reads.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_read_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 7266e0a734b94612b77da9173f247391
          name: 'Nutanix Host: Storage Controller: IO total read, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.read.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total controller read Input/Output size.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_read_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: d49ffc420dee4731bf28f9835bb8e46d
          name: 'Nutanix Host: Storage Controller: IO total read, sec'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.read.total.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Total controller read Input/Output time.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_read_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: c9e37cc8765d4492ae579029fddfe9a6
          name: 'Nutanix Host: Storage Controller: IO total, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Total controller Input/Output size.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: df7e8de51d1e4c309ace840439dc944e
          name: 'Nutanix Host: Storage Controller: IO total, sec'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.total.sec
          delay: '0'
          history: 7d
          units: s
          description: 'Total controller Input/Output time.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_io_time_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: b7b1af82edeb4852a3febd9d29404e16
          name: 'Nutanix Host: Storage Controller: Write IO'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.write
          delay: '0'
          history: 7d
          description: 'Input/Output write operations to the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_write_io
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 9378ffd9966d4980897022b2017ab63b
          name: 'Nutanix Host: Storage Controller: Write IO, bandwidth'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.write.bandwidth
          delay: '0'
          history: 7d
          units: Bps
          description: 'Write data transferred in B/sec to the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_write_io_bandwidth_kBps
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 967bf0b92cf54179be5c9686fb83f7b3
          name: 'Nutanix Host: Storage Controller: Write IO, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.write.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Storage Controller average write Input/Output in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_write_io_size_kbytes
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1024'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 3e8f8771f1e8406eb181caa86dbed38d
          name: 'Nutanix Host: Storage Controller: Write IO, latency'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.write.latency
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Input/Output write latency to the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_avg_write_io_latency_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 6f3462bba55c4570b1ad7a5d614f567c
          name: 'Nutanix Host: Storage Controller: Write IO, %'
          type: DEPENDENT
          key: nutanix.host.storage.controller.io.write.percent
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: '%'
          description: 'Percentage of Input/Output operations to the Storage Controller that are writes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_write_io_ppm
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '0.0001'
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 34174b3fb45e41af9aa75d0ba3b115ff
          name: 'Nutanix Host: Storage Controller: IOPS'
          type: DEPENDENT
          key: nutanix.host.storage.controller.iops
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output operations per second from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: b7c2fcd576c744c4b51256dfc1f9e83d
          name: 'Nutanix Host: Storage Controller: Read IOPS'
          type: DEPENDENT
          key: nutanix.host.storage.controller.iops.read
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output read operations per second from the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_read_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 7c8b93d01f0a4078837a00760de1d49c
          name: 'Nutanix Host: Storage Controller: Write IOPS'
          type: DEPENDENT
          key: nutanix.host.storage.controller.iops.write
          delay: '0'
          history: 7d
          units: '!iops'
          description: 'Input/Output write operations per second to the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_num_write_iops
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 476b129cba244a5b8bb96ccc78de397d
          name: 'Nutanix Host: Storage Tier: Das-sata capacity, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.tier.das_sata.capacity.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The total capacity of Das-sata in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.das-sata.capacity_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: eb23e35b137241f5a9b7142957aec07c
          name: 'Nutanix Host: Storage Tier: Das-sata free, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.tier.das_sata.free.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The free space of Das-sata in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.das-sata.free_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 05273aaa28c74743b1bd57a528f575b6
          name: 'Nutanix Host: Storage Tier: Das-sata usage, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.tier.das_sata.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The used space of Das-sata in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.das-sata.usage_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 92a3a023365848a988be29f5ad8e3bfe
          name: 'Nutanix Host: Storage Tier: SSD capacity, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.tier.ssd.capacity.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The total capacity of SSD in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.ssd.capacity_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: f4bd200a2cae4cc898718d138a57083a
          name: 'Nutanix Host: Storage Tier: SSD free, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.tier.ssd.free.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The free space of SSD in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.ssd.free_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 6cb0e31dcefd4354908feba5396b3959
          name: 'Nutanix Host: Storage Tier: SSD usage, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.tier.ssd.usage.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'The used space of SSD in bytes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.usage_stats.[''storage_tier.ssd.usage_bytes'']'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: c290ab59bfe24e00b7b54d35e039d08b
          name: 'Nutanix Host: Storage Controller: Timespan, sec'
          type: DEPENDENT
          key: nutanix.host.storage.controller.timespan.sec
          delay: '0'
          history: 7d
          value_type: FLOAT
          units: s
          description: 'Controller timespan.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_timespan_usecs
              error_handler: DISCARD_VALUE
            - type: MULTIPLIER
              parameters:
                - '1.0E-6'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
        - uuid: 85c0a08944454f5d9d60f3124dd834e0
          name: 'Nutanix Host: Storage Controller: Total transformed usage, bytes'
          type: DEPENDENT
          key: nutanix.host.storage.controller.transformed.usage.total.bytes
          delay: '0'
          history: 7d
          units: B
          description: 'Actual usage of the Storage Controller.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.stats.controller_total_transformed_usage_bytes
              error_handler: DISCARD_VALUE
          master_item:
            key: nutanix.host.metric.get
          tags:
            - tag: component
              value: storage
      discovery_rules:
        - uuid: 389dc85322634670a9e2048ac7d378f5
          name: 'Alert discovery'
          type: DEPENDENT
          key: nutanix.host.alert.discovery
          delay: '0'
          filter:
            evaltype: AND
            conditions:
              - macro: '{#ALERT.NAME}'
                value: '{$NUTANIX.ALERT.DISCOVERY.NAME.MATCHES}'
                formulaid: A
              - macro: '{#ALERT.NAME}'
                value: '{$NUTANIX.ALERT.DISCOVERY.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
              - macro: '{#ALERT.SEVERITY}'
                value: '{$NUTANIX.ALERT.DISCOVERY.SEVERITY.MATCHES}'
                formulaid: C
              - macro: '{#ALERT.STATE}'
                value: '{$NUTANIX.ALERT.DISCOVERY.STATE.MATCHES}'
                formulaid: D
          description: |
            Discovery of all alerts.
            Alerts will be grouped by title. For each alert, in addition to the basic information, the number of activation and last alert ID will be available.
          item_prototypes:
            - uuid: 8fa4a777a3eb4be5a0030193743ee589
              name: 'Nutanix Host: Alert [{#ALERT.NAME}]: Count alerts'
              type: DEPENDENT
              key: 'nutanix.host.alert.count["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              description: 'The number of times this alert was triggered.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.count'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.host.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: 2bcb76c0eafd49738c0fb055ab3c9142
              name: 'Nutanix Host: Alert [{#ALERT.NAME}]: Create datetime'
              type: DEPENDENT
              key: 'nutanix.host.alert.created["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              units: unixtime
              description: 'The alert creation date and time.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.created'
                - type: MULTIPLIER
                  parameters:
                    - '0.000001'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.host.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: a489cfb61a3d4eb8a0faf7c8f6abd449
              name: 'Nutanix Host: Alert [{#ALERT.NAME}]: Last alert ID'
              type: DEPENDENT
              key: 'nutanix.host.alert.last_id["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: 'Latest ID of the alert.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.last_id'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
              master_item:
                key: nutanix.host.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: 4ea82682f355440ba35372e506a5531d
              name: 'Nutanix Host: Alert [{#ALERT.NAME}]: Detailed message'
              type: DEPENDENT
              key: 'nutanix.host.alert.message["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Detailed information about the current alert.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.message'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
              master_item:
                key: nutanix.host.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: 4cb36a2694c04c3caae239752551a963
              name: 'Nutanix Host: Alert [{#ALERT.NAME}]: Severity'
              type: DEPENDENT
              key: 'nutanix.host.alert.severity["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              description: |
                Alert severity. One of the following:
                - Info;
                - Warning;
                - Critical;
                - Unknown.
              valuemap:
                name: 'Nutanix: Alert severity'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.severity'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.host.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: 35c0d10c39f445f0a0d0df07588495b9
              name: 'Nutanix Host: Alert [{#ALERT.NAME}]: State'
              type: DEPENDENT
              key: 'nutanix.host.alert.state["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              description: |
                Alert state. One of the following:
                - OK;
                - Problem.
              valuemap:
                name: 'Nutanix: Alert state'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.state'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.host.alert.get
              tags:
                - tag: component
                  value: alert
            - uuid: 80a264a6ce9846fba559bc43a587710e
              name: 'Nutanix Host: Alert [{#ALERT.NAME}]: Full title'
              type: DEPENDENT
              key: 'nutanix.host.alert.title["{#ALERT.KEY}"]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'The full title of the alert.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.{#ALERT.KEY}.title'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
              master_item:
                key: nutanix.host.alert.get
              tags:
                - tag: component
                  value: alert
          master_item:
            key: nutanix.host.alert.get
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  const json_data = JSON.parse(value);
                  var output_data = [];
                  
                  for (var entity in json_data) {
                      output_data.push({
                          "{#ALERT.KEY}": entity,
                          "{#ALERT.STATE}": json_data[entity].state,
                          "{#ALERT.TITLE}": json_data[entity].title,
                          "{#ALERT.SEVERITY}": json_data[entity].severity,
                          "{#ALERT.NAME}": json_data[entity].name.length > 50 ? json_data[entity].name.substr(0, 50) + '...' : json_data[entity].name
                      });
                  }
                  
                  return JSON.stringify(output_data);
                  
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: a3255c6bd1014de0a486aa2b1bb5d047
          name: 'Disk discovery'
          type: DEPENDENT
          key: nutanix.host.disk.discovery
          delay: '0'
          description: 'Discovery of all disks.'
          item_prototypes:
            - uuid: 660ca0265176460090413cd91a29c821
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Space: Total, bytes'
              type: DEPENDENT
              key: 'nutanix.host.disk.capacity.bytes["{#DISK.SERIAL}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'The total disk space in bytes.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#DISK.ID}''].usage_stats.[''storage.capacity_bytes'']'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
              master_item:
                key: nutanix.host.disk.get
              tags:
                - tag: component
                  value: disk
                - tag: location
                  value: '{#DISK.LOCATION}'
                - tag: path
                  value: '{#DISK.MOUNT.PATH}'
                - tag: serial
                  value: '{#DISK.SERIAL}'
            - uuid: e7a8aadc572648f38fdcba9eaaa9ef78
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Space: Free, bytes'
              type: DEPENDENT
              key: 'nutanix.host.disk.free.bytes["{#DISK.SERIAL}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'The free disk space in bytes.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#DISK.ID}''].usage_stats.[''storage.free_bytes'']'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.host.disk.get
              tags:
                - tag: component
                  value: disk
                - tag: location
                  value: '{#DISK.LOCATION}'
                - tag: path
                  value: '{#DISK.MOUNT.PATH}'
                - tag: serial
                  value: '{#DISK.SERIAL}'
            - uuid: a28563a3464c4fef8ff05b7683495efd
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: IO, latency'
              type: DEPENDENT
              key: 'nutanix.host.disk.io.avg.latency["{#DISK.SERIAL}"]'
              delay: '0'
              history: 7d
              value_type: FLOAT
              units: s
              description: 'The average Input/Output operation latency.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#DISK.ID}''].stats.avg_io_latency_usecs'
                - type: MULTIPLIER
                  parameters:
                    - '1.0E-6'
              master_item:
                key: nutanix.host.disk.get
              tags:
                - tag: component
                  value: disk
                - tag: location
                  value: '{#DISK.LOCATION}'
                - tag: path
                  value: '{#DISK.MOUNT.PATH}'
                - tag: serial
                  value: '{#DISK.SERIAL}'
            - uuid: 21c81453cc8c44daaa50b1e5f45c1f4b
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Bandwidth'
              type: DEPENDENT
              key: 'nutanix.host.disk.io.bandwidth["{#DISK.SERIAL}"]'
              delay: '0'
              history: 7d
              units: Bps
              description: 'Bandwidth of the disk in B/sec.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#DISK.ID}''].stats.io_bandwidth_kBps'
                - type: MULTIPLIER
                  parameters:
                    - '1024'
              master_item:
                key: nutanix.host.disk.get
              tags:
                - tag: component
                  value: disk
                - tag: location
                  value: '{#DISK.LOCATION}'
                - tag: path
                  value: '{#DISK.MOUNT.PATH}'
                - tag: serial
                  value: '{#DISK.SERIAL}'
            - uuid: 324f5d2658b34cc3ab4fcc4a6e2008fe
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: IOPS'
              type: DEPENDENT
              key: 'nutanix.host.disk.iops["{#DISK.SERIAL}"]'
              delay: '0'
              history: 7d
              units: '!iops'
              description: 'The number of Input/Output operations from the disk.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#DISK.ID}''].stats.num_iops'
              master_item:
                key: nutanix.host.disk.get
              tags:
                - tag: component
                  value: disk
                - tag: location
                  value: '{#DISK.LOCATION}'
                - tag: path
                  value: '{#DISK.MOUNT.PATH}'
                - tag: serial
                  value: '{#DISK.SERIAL}'
            - uuid: 2517600fc093419eab9cc822fa1454a6
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Space: Logical usage, bytes'
              type: DEPENDENT
              key: 'nutanix.host.disk.logical.usage.bytes["{#DISK.SERIAL}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'The logical used disk space in bytes.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#DISK.ID}''].usage_stats.[''storage.logical_usage_bytes'']'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.host.disk.get
              tags:
                - tag: component
                  value: disk
                - tag: location
                  value: '{#DISK.LOCATION}'
                - tag: path
                  value: '{#DISK.MOUNT.PATH}'
                - tag: serial
                  value: '{#DISK.SERIAL}'
            - uuid: 673be2469f634e4cb992550d6665f0e9
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Online'
              type: DEPENDENT
              key: 'nutanix.host.disk.online["{#DISK.SERIAL}"]'
              delay: '0'
              history: 7d
              description: 'Indicates whether the disk is online.'
              valuemap:
                name: 'Nutanix: Boolean'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#DISK.ID}''].online'
                - type: BOOL_TO_DECIMAL
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '2'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.host.disk.get
              tags:
                - tag: component
                  value: disk
                - tag: location
                  value: '{#DISK.LOCATION}'
                - tag: path
                  value: '{#DISK.MOUNT.PATH}'
                - tag: serial
                  value: '{#DISK.SERIAL}'
            - uuid: d0ecf7b9e9cd4a7687ff9fd8adc8e7e3
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Status'
              type: DEPENDENT
              key: 'nutanix.host.disk.status["{#DISK.SERIAL}"]'
              delay: '0'
              history: 7d
              description: |
                Current disk status. One of the following:
                - NORMAL;
                - DATA_MIGRATION_INITIATED;
                - MARKED_FOR_REMOVAL_BUT_NOT_DETACHABLE;
                - DETACHABLE.
              valuemap:
                name: 'Nutanix: Disk status'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#DISK.ID}''].disk_status'
                - type: JAVASCRIPT
                  parameters:
                    - |
                      const idx = [
                        'NORMAL',
                        'DATA_MIGRATION_INITIATED',
                        'MARKED_FOR_REMOVAL_BUT_NOT_DETACHABLE',
                        'DETACHABLE'
                      ].indexOf(value.toUpperCase());
                      return idx !== -1 ? idx : 4;
                      
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.host.disk.get
              tags:
                - tag: component
                  value: disk
                - tag: location
                  value: '{#DISK.LOCATION}'
                - tag: path
                  value: '{#DISK.MOUNT.PATH}'
                - tag: serial
                  value: '{#DISK.SERIAL}'
            - uuid: 904596dcd2db4721bd923e325b8b889e
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Space: Used, bytes'
              type: DEPENDENT
              key: 'nutanix.host.disk.usage.bytes["{#DISK.SERIAL}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'The used disk space in bytes.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#DISK.ID}''].usage_stats.[''storage.usage_bytes'']'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.host.disk.get
              tags:
                - tag: component
                  value: disk
                - tag: location
                  value: '{#DISK.LOCATION}'
                - tag: path
                  value: '{#DISK.MOUNT.PATH}'
                - tag: serial
                  value: '{#DISK.SERIAL}'
          graph_prototypes:
            - uuid: a9da4fc17600434b9abecd02a9e3d9f3
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Space: Logical usage and Used'
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 0040FF
                  item:
                    host: 'Nutanix Host Prism Element by HTTP'
                    key: 'nutanix.host.disk.usage.bytes["{#DISK.SERIAL}"]'
                - sortorder: '1'
                  drawtype: GRADIENT_LINE
                  color: 00BFFF
                  item:
                    host: 'Nutanix Host Prism Element by HTTP'
                    key: 'nutanix.host.disk.logical.usage.bytes["{#DISK.SERIAL}"]'
            - uuid: a225393ead3e4218be09cc19ba84392e
              name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Space: Total and Used'
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 0040FF
                  item:
                    host: 'Nutanix Host Prism Element by HTTP'
                    key: 'nutanix.host.disk.usage.bytes["{#DISK.SERIAL}"]'
                - sortorder: '1'
                  drawtype: GRADIENT_LINE
                  color: 00BFFF
                  item:
                    host: 'Nutanix Host Prism Element by HTTP'
                    key: 'nutanix.host.disk.capacity.bytes["{#DISK.SERIAL}"]'
          master_item:
            key: nutanix.host.disk.get
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  const json_data = JSON.parse(value);
                  var output_data = [];
                  
                  for (var entity in json_data) {
                      output_data.push({
                          "{#DISK.ID}": json_data[entity].id,
                          "{#DISK.SERIAL}": json_data[entity].mount_path.split('/').pop(),
                          "{#DISK.MOUNT.PATH}": json_data[entity].mount_path,
                          "{#DISK.LOCATION}": json_data[entity].location
                      });
                  };
                  
                  return JSON.stringify(output_data);
                  
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
      tags:
        - tag: class
          value: software
        - tag: target
          value: host
        - tag: target
          value: nutanix
        - tag: target
          value: prism-element
      macros:
        - macro: '{$NUTANIX.ALERT.DISCOVERY.NAME.MATCHES}'
          value: '.*'
          description: 'Filter of discoverable Nutanix alerts by name.'
        - macro: '{$NUTANIX.ALERT.DISCOVERY.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Filter to exclude discovered Nutanix alerts by name.'
        - macro: '{$NUTANIX.ALERT.DISCOVERY.SEVERITY.MATCHES}'
          value: '.*'
          description: 'Filter to exclude discovered Nutanix alerts by severity. Set all possible severities for filtering in the range 0-2. "0" - Info, "1" - Warning, "2" - Critical.'
        - macro: '{$NUTANIX.ALERT.DISCOVERY.STATE.MATCHES}'
          value: '.*'
          description: 'Filter to exclude discovered Nutanix alerts by state. Set "1" for filtering only problem alerts or "0" for resolved ones.'
        - macro: '{$NUTANIX.HOST.UUID}'
          description: 'UUID of the host.'
        - macro: '{$NUTANIX.PASSWORD}'
          type: SECRET_TEXT
          description: 'Nutanix API password.'
        - macro: '{$NUTANIX.PRISM.ELEMENT.IP}'
          value: '<Put your IP here>'
          description: 'Set the Nutanix API IP here.'
        - macro: '{$NUTANIX.PRISM.ELEMENT.PORT}'
          value: '9440'
          description: 'Set the Nutanix API port here.'
        - macro: '{$NUTANIX.PROXY}'
          description: 'Sets the HTTP proxy value. If this macro is empty, then no proxy is used.'
        - macro: '{$NUTANIX.TIMEOUT}'
          value: 10s
          description: 'API response timeout.'
        - macro: '{$NUTANIX.USER}'
          value: '<Put your API username here>'
          description: 'Nutanix API username.'
      dashboards:
        - uuid: ef6430bfad434b939f1bb22848cba40e
          name: 'Nutanix Host Prism Element overview'
          pages:
            - name: 'Nutanix Host: Overview'
              widgets:
                - type: ITEM
                  name: 'General: Host state'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.state
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: IOPS
                  'y': '2'
                  width: '18'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: IOPS overview'
                - type: ITEM
                  name: 'General: Total CPU capacity'
                  'y': '8'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.cpu.capacity.hz
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Total memory'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.memory.total.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Reboot pending'
                  x: '6'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.reboot
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: CPU model'
                  x: '6'
                  'y': '8'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.cpu.model
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '20'
                - type: ITEM
                  name: 'General: Timespan'
                  x: '6'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.timespan.sec
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Maintenance mode'
                  x: '12'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.maintenance
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Storage capacity'
                  x: '12'
                  'y': '8'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: General: Storage capacity'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.storage.capacity.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Storage logical usage'
                  x: '12'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: General: Storage logical usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.storage.logical.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Degrade status'
                  x: '18'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.degraded
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Number of virtual machines'
                  x: '18'
                  'y': '2'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.vms.num
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Host type'
                  x: '18'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.type
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '30'
                - type: ITEM
                  name: 'General: Boot time'
                  x: '18'
                  'y': '6'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.boot.time
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '30'
                - type: ITEM
                  name: 'General: Storage free'
                  x: '18'
                  'y': '8'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: General: Storage free'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.storage.free.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Storage usage'
                  x: '18'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: General: Storage usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.storage.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
            - name: 'Nutanix Host: Performance'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: CPU usage'
                  width: '16'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Hypervisor: CPU usage, %'
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: Memory usage'
                  'y': '5'
                  width: '16'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Hypervisor: Memory usage, %'
                - type: ITEM
                  name: 'Number of CPU cores'
                  'y': '10'
                  width: '8'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.hypervisor.cpu.cores.num
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Number of CPU sockets'
                  x: '8'
                  'y': '10'
                  width: '8'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.hypervisor.cpu.sockets.num
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Hypervisor: CPU usage'
                  x: '16'
                  width: '8'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.hypervisor.cpu.usage.percent
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Total CPU capacity'
                  x: '16'
                  'y': '3'
                  width: '8'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.cpu.capacity.hz
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Hypervisor: Memory usage'
                  x: '16'
                  'y': '5'
                  width: '8'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.hypervisor.memory.usage.percent
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Total memory'
                  x: '16'
                  'y': '8'
                  width: '8'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.memory.total.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Number of CPU threads'
                  x: '16'
                  'y': '10'
                  width: '8'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.hypervisor.cpu.threads.num
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
            - name: 'Nutanix Host: IO'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'General: IOPS'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: IOPS overview'
                - type: GRAPH_CLASSIC
                  name: 'General: Bandwidth'
                  'y': '6'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: General: IO, bandwidth'
                - type: ITEM
                  name: 'General: IOPS'
                  x: '12'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.iops
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Read IOPS'
                  x: '12'
                  'y': '2'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.iops.read
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'General: Write IOPS'
                  x: '12'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.general.iops.write
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: show
                      value: '4'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: 'General: Latency'
                  x: '12'
                  'y': '6'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: General: IO, latency'
                - type: GRAPH_CLASSIC
                  name: 'General: Read IO / Write IO'
                  x: '18'
                  width: '6'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: General: Read IO / Write IO'
            - name: 'Nutanix Host: Content Cache'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'Content Cache: Memory'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Content Cache: Memory, bytes'
                - type: ITEM
                  name: 'Content Cache: Logical memory usage'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Content Cache: Logical memory usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.content.cache.logical.memory.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: 'Content Cache: SSD usage'
                  'y': '6'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Content Cache: SSD usage, bytes'
                - type: ITEM
                  name: 'Content Cache: Logical SSD usage'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Content Cache: Logical SSD usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.content.cache.logical.ssd.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Logical saved memory usage'
                  x: '6'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Content Cache: Logical saved memory usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.content.cache.saved.memory.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Physical SSD usage'
                  x: '6'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Content Cache: Physical SSD usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.content.cache.physical.ssd.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Physical memory usage'
                  x: '12'
                  'y': '4'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Content Cache: Physical memory usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.content.cache.physical.memory.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Saved SSD usage'
                  x: '12'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Content Cache: Saved SSD usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.content.cache.saved.ssd.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: Hit rate'
                  x: '18'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.content.cache.hit.percent
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: 'Content Cache: Hit rate'
                  x: '18'
                  'y': '2'
                  width: '6'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Content Cache: Hit rate, %'
                - type: ITEM
                  name: 'Content Cache: Number of lookups'
                  x: '18'
                  'y': '8'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.content.cache.lookups.num
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Content Cache: References'
                  x: '18'
                  'y': '10'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_places
                      value: '0'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.content.cache.dedup.ref.num
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
            - name: 'Nutanix Host: Hypervisor'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: IOPS'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Hypervisor: IOPS'
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: Latency'
                  'y': '4'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Hypervisor: IO, latency'
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: Bandwidth'
                  'y': '8'
                  width: '18'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Hypervisor: IO, bandwidth'
                - type: ITEM
                  name: 'Hypervisor: Full name'
                  x: '18'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.hypervisor.name
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                    - type: INTEGER
                      name: value_size
                      value: '30'
                - type: ITEM
                  name: 'Hypervisor: Timespan'
                  x: '18'
                  'y': '2'
                  width: '6'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.hypervisor.timespan.sec
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: Received'
                  x: '18'
                  'y': '4'
                  width: '6'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Hypervisor: Received, bytes'
                - type: GRAPH_CLASSIC
                  name: 'Hypervisor: Received'
                  x: '18'
                  'y': '8'
                  width: '6'
                  height: '4'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Hypervisor: Transmitted, bytes'
            - name: 'Nutanix Host: Storage controller'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'Storage controller: IOPS'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Storage Controller: IOPS'
                - type: GRAPH_CLASSIC
                  name: 'Storage controller: IO'
                  'y': '6'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Storage Controller: IO'
                - type: GRAPH_CLASSIC
                  name: 'Storage controller: Read IO / Write IO'
                  x: '12'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Storage Controller: Read IO / Write IO'
                - type: GRAPH_CLASSIC
                  name: 'Storage controller: Bandwidth'
                  x: '12'
                  'y': '6'
                  width: '12'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Storage Controller: IO, bandwidth'
            - name: 'Nutanix Host: Storage Tier'
              widgets:
                - type: GRAPH_CLASSIC
                  name: 'Storage Tier: Das-sata'
                  width: '18'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Storage Tier: Das-sata'
                - type: GRAPH_CLASSIC
                  name: 'Storage Tier: SSD'
                  'y': '6'
                  width: '18'
                  height: '6'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Storage Tier: SSD'
                - type: ITEM
                  name: 'Storage Tier: Das-sata free'
                  x: '18'
                  width: '6'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Storage Tier: Das-sata free'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.storage.controller.tier.das_sata.free.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Storage Tier: Das-sata usage'
                  x: '18'
                  'y': '3'
                  width: '6'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Storage Tier: Das-sata usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.storage.controller.tier.das_sata.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Storage Tier: SSD free'
                  x: '18'
                  'y': '6'
                  width: '6'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Storage Tier: SSD free'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.storage.controller.tier.ssd.free.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
                - type: ITEM
                  name: 'Storage Tier: SSD usage'
                  x: '18'
                  'y': '9'
                  width: '6'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: INTEGER
                      name: decimal_size
                      value: '45'
                    - type: STRING
                      name: description
                      value: 'Nutanix Host: Storage Tier: SSD usage'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: nutanix.host.storage.controller.tier.ssd.usage.bytes
                    - type: INTEGER
                      name: show
                      value: '1'
                    - type: INTEGER
                      name: show
                      value: '2'
                    - type: INTEGER
                      name: units_bold
                      value: '0'
                    - type: INTEGER
                      name: value_bold
                      value: '0'
            - name: 'Nutanix Host: Disk'
              widgets:
                - type: GRAPH_PROTOTYPE
                  name: 'Space: Total and Used'
                  width: '12'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Space: Total and Used'
                - type: GRAPH_PROTOTYPE
                  name: 'Space: Free'
                  'y': '6'
                  width: '24'
                  height: '6'
                  fields:
                    - type: ITEM_PROTOTYPE
                      name: itemid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        key: 'nutanix.host.disk.free.bytes["{#DISK.SERIAL}"]'
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: GRAPH_PROTOTYPE
                  name: 'Space: Logical usage and Used'
                  x: '12'
                  width: '12'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        host: 'Nutanix Host Prism Element by HTTP'
                        name: 'Nutanix Host: Disk [{#DISK.SERIAL}]: Space: Logical usage and Used'
      valuemaps:
        - uuid: c2fbc73721564974adb6251fdb372f70
          name: 'Nutanix: Alert severity'
          mappings:
            - value: '0'
              newvalue: Info
            - value: '1'
              newvalue: Warning
            - value: '2'
              newvalue: Critical
            - value: '3'
              newvalue: Unknown
        - uuid: 7972e3d351f04d1b9cd4b7a542d8a81f
          name: 'Nutanix: Alert state'
          mappings:
            - value: '0'
              newvalue: Ok
            - value: '1'
              newvalue: Problem
        - uuid: 20773014179d419cae5306b0370d405c
          name: 'Nutanix: Boolean'
          mappings:
            - value: '0'
              newvalue: 'False'
            - value: '1'
              newvalue: 'True'
            - value: '2'
              newvalue: Unknown
        - uuid: 6e081d8e0e4e43f7914b311ce2925f82
          name: 'Nutanix: Degraded state'
          mappings:
            - value: '0'
              newvalue: 'Not degraded'
            - value: '1'
              newvalue: Degraded
            - value: '2'
              newvalue: Unknown
        - uuid: 1381c5ba61eb4cb89303b6256f81e036
          name: 'Nutanix: Disk status'
          mappings:
            - value: '0'
              newvalue: Normal
            - value: '1'
              newvalue: 'Data migration initiated'
            - value: '2'
              newvalue: 'Marked for removal but not detachable'
            - value: '3'
              newvalue: Detachable
            - value: '4'
              newvalue: Unknown
        - uuid: 513019c2559c48cfbc6c801179c4a7ce
          name: 'Nutanix: Host state'
          mappings:
            - value: '0'
              newvalue: New
            - value: '1'
              newvalue: Normal
            - value: '2'
              newvalue: 'Marked for removal but not detachable'
            - value: '3'
              newvalue: Detachable
            - value: '4'
              newvalue: Unknown
        - uuid: d934bf8ae17c4ed78a439b92cf2f7bef
          name: 'Nutanix: Host type'
          mappings:
            - value: '0'
              newvalue: 'Hyper converged'
            - value: '1'
              newvalue: 'Compute only'
            - value: '2'
              newvalue: Unknown
        - uuid: 1ee8073575c842269be02dd94211c22c
          name: 'Nutanix: Maintenance mode'
          mappings:
            - value: '0'
              newvalue: Normal
            - value: '1'
              newvalue: Maintenance
            - value: '2'
              newvalue: Unknown
    - uuid: 0bb43a48a33f48ad910441384486edb4
      template: 'Nutanix Prism Element by HTTP'
      name: 'Nutanix Prism Element by HTTP'
      description: |
        Prism Element: It is a service already built into the platform for every Nutanix cluster deployed. It provides the ability to fully configure, manage, and monitor Nutanix clusters running any hypervisors, however, it only manages the cluster it is part of.
        
        This template is designed for the effortless deployment of Nutanix Prism Element monitoring and doesn't require any external scripts.
        
        The templates "Nutanix Host Prism Element by HTTP" and "Nutanix Cluster Prism Element by HTTP" can be used in discovery, as well as manually linked to a host.
        
        More details can be found in the official documentation:
          - on the Nutanix Prism Element REST API: https://www.nutanix.dev/api_reference/apis/prism_v2.html
          - on the differences between Nutanix API versions: https://www.nutanix.dev/api-versions/
          - on the differences between Nutanix Prism Element REST API and Nutanix Prism Central REST API: https://next.nutanix.com/how-it-works-22/differences-between-prism-element-prism-central-and-prism-pro-37137
        
        Generated by official Zabbix template tool "Templator"
      groups:
        - name: Templates/Applications
      items:
        - uuid: 0c073836f90a4072be7acfc5d1a96b9e
          name: 'Nutanix: Get cluster'
          type: SCRIPT
          key: nutanix.cluster.get
          delay: 10m
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            var Nutanix = {
            	params: {},
            
            	setParams: function (requiredParams, allParams) {
            		requiredParams.forEach(function (field) {
            			if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            				throw 'Required param is not set: ' + field + '.';
            			}
            		});
            
            		Nutanix.params = params;
            	},
            
            	request: function (url) {
            
            		var request = new HttpRequest();
            
            		if (typeof Nutanix.params.proxy !== 'undefined' && Nutanix.params.proxy !== '') {
            			request.setProxy(Nutanix.params.proxy);
            		}
            
            		request.setHttpAuth(HTTPAUTH_BASIC, Nutanix.params.username, Nutanix.params.password);
            
            		Zabbix.log(4, '[ Nutanix ] Sending request: ' + url);
            
            		const response = request.get(url);
            
            		Zabbix.log(4, '[ Nutanix ] Received response with status code ' + request.getStatus() + ': ' + response);
            
            		if (request.getStatus() < 200 || request.getStatus() >= 300) {
            			throw 'Request failed with status code ' + request.getStatus() + ': ' + response;
            		}
            
            		try {
            			response = JSON.parse(response);
            		}
            		catch (error) {
            			throw 'Failed to parse response received from Nutanix PRISM API. Check debug log for more information.';
            		}
            
            		return response;
            	},
            
            	deduplicateAlerts: function (full_data) {
            		const severity_mapping = [
            			'kinfo',
            			'kwarning',
            			'kcritical'
            		]
            
            		var output_data = {};
            		for (var entity in full_data.entities) {
            	
            			if (Nutanix.params.api_method === 'clusters') {
            				if (result.entities[entity].node_uuid.split('-').length == 5) continue;
            			}
            
            			var severity = severity_mapping.indexOf(full_data.entities[entity].severity.toLowerCase()),
            				message = full_data.entities[entity].message,
            				title = full_data.entities[entity].alert_title;
            	
            			full_data.entities[entity].context_types.forEach(function(context, index) {
            				message = message.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            				title = title.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            			});
            	
            			key = md5(title + message);
            			if (key in output_data) {
            				if (full_data.entities[entity].created_time_stamp_in_usecs > output_data[key].created) {
            					output_data[key].created = full_data.entities[entity].created_time_stamp_in_usecs;
            					output_data[key].severity = severity !== -1 ? severity : 3;
            					output_data[key].state = full_data.entities[entity].resolved ? 0 : 1;
            					output_data[key].message = full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message;
            					output_data[key].last_id = full_data.entities[entity].id;
            				}
            				output_data[key].count += 1;
            			} else {
            				output_data[key] = {
            					"name": title + ' - ' + message,
            					"title": title != '' ? title : message,
            					"created": full_data.entities[entity].created_time_stamp_in_usecs,
            					"severity": severity !== -1 ? severity : 3,
            					"state": full_data.entities[entity].resolved ? 0 : 1,
            					"message": full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message,
            					"last_id": full_data.entities[entity].id,
            					"count": 1
            				}
            			}
            		}
            
            		return output_data;
            	},
            
            	cleanUnsupported: function (full_stat) {
            		var output_stat = {};
            		for (var element in full_stat) {
            			if (full_stat[element] !== '-1') {
            				output_stat[element] = full_stat[element];
            			}
            		};
            		
            		return output_stat;
            	}
            };
            
            try {
            	const params = JSON.parse(value);
            	Nutanix.setParams(['endpoint_host', 'endpoint_port', 'username', 'password', 'auth_type', 'api_method'], params);
            
            	const url = 'https://' + Nutanix.params.endpoint_host + ':' + Nutanix.params.endpoint_port + '/PrismGateway/services/rest/v2.0/' + Nutanix.params.api_method,
            		result = Nutanix.request(url);
            
            	return JSON.stringify(result);
            }
            catch (error) {
            	error += (String(error).endsWith('.')) ? '' : '.';
            	Zabbix.log(4, '[ Nutanix ] ERROR: ' + error);
            
            	return JSON.stringify({ 'error': error });
            }
            
          description: 'Get the available clusters.'
          timeout: 10s
          parameters:
            - name: api_method
              value: clusters
            - name: auth_type
              value: basic
            - name: endpoint_host
              value: '{$NUTANIX.PRISM.ELEMENT.IP}'
            - name: endpoint_port
              value: '{$NUTANIX.PRISM.ELEMENT.PORT}'
            - name: password
              value: '{$NUTANIX.PASSWORD}'
            - name: proxy
              value: '{$NUTANIX.PROXY}'
            - name: username
              value: '{$NUTANIX.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: 435f96fef5e44fbaae3d3281a6fd88eb
          name: 'Nutanix: Get cluster check'
          type: DEPENDENT
          key: nutanix.cluster.get.check
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          description: 'Data collection check. Check the latest values for details.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.error
              error_handler: CUSTOM_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: nutanix.cluster.get
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: baf3ae722bd44a09a628f9c81c541259
              expression: 'length(last(/Nutanix Prism Element by HTTP/nutanix.cluster.get.check))>0'
              name: 'Nutanix: Failed to get cluster data from the API'
              priority: HIGH
              description: 'Failed to get data from the API. Check the latest values for details.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 06ce8fe78e9642cfb2064ad2aa25b50e
          name: 'Nutanix: Get host'
          type: SCRIPT
          key: nutanix.host.get
          delay: 10m
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            var Nutanix = {
            	params: {},
            
            	setParams: function (requiredParams, allParams) {
            		requiredParams.forEach(function (field) {
            			if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            				throw 'Required param is not set: ' + field + '.';
            			}
            		});
            
            		Nutanix.params = params;
            	},
            
            	request: function (url) {
            
            		var request = new HttpRequest();
            
            		if (typeof Nutanix.params.proxy !== 'undefined' && Nutanix.params.proxy !== '') {
            			request.setProxy(Nutanix.params.proxy);
            		}
            
            		request.setHttpAuth(HTTPAUTH_BASIC, Nutanix.params.username, Nutanix.params.password);
            
            		Zabbix.log(4, '[ Nutanix ] Sending request: ' + url);
            
            		const response = request.get(url);
            
            		Zabbix.log(4, '[ Nutanix ] Received response with status code ' + request.getStatus() + ': ' + response);
            
            		if (request.getStatus() < 200 || request.getStatus() >= 300) {
            			throw 'Request failed with status code ' + request.getStatus() + ': ' + response;
            		}
            
            		try {
            			response = JSON.parse(response);
            		}
            		catch (error) {
            			throw 'Failed to parse response received from Nutanix PRISM API. Check debug log for more information.';
            		}
            
            		return response;
            	},
            
            	deduplicateAlerts: function (full_data) {
            		const severity_mapping = [
            			'kinfo',
            			'kwarning',
            			'kcritical'
            		]
            
            		var output_data = {};
            		for (var entity in full_data.entities) {
            	
            			if (Nutanix.params.api_method === 'clusters') {
            				if (result.entities[entity].node_uuid.split('-').length == 5) continue;
            			}
            
            			var severity = severity_mapping.indexOf(full_data.entities[entity].severity.toLowerCase()),
            				message = full_data.entities[entity].message,
            				title = full_data.entities[entity].alert_title;
            	
            			full_data.entities[entity].context_types.forEach(function(context, index) {
            				message = message.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            				title = title.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            			});
            	
            			key = md5(title + message);
            			if (key in output_data) {
            				if (full_data.entities[entity].created_time_stamp_in_usecs > output_data[key].created) {
            					output_data[key].created = full_data.entities[entity].created_time_stamp_in_usecs;
            					output_data[key].severity = severity !== -1 ? severity : 3;
            					output_data[key].state = full_data.entities[entity].resolved ? 0 : 1;
            					output_data[key].message = full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message;
            					output_data[key].last_id = full_data.entities[entity].id;
            				}
            				output_data[key].count += 1;
            			} else {
            				output_data[key] = {
            					"name": title + ' - ' + message,
            					"title": title != '' ? title : message,
            					"created": full_data.entities[entity].created_time_stamp_in_usecs,
            					"severity": severity !== -1 ? severity : 3,
            					"state": full_data.entities[entity].resolved ? 0 : 1,
            					"message": full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message,
            					"last_id": full_data.entities[entity].id,
            					"count": 1
            				}
            			}
            		}
            
            		return output_data;
            	},
            
            	cleanUnsupported: function (full_stat) {
            		var output_stat = {};
            		for (var element in full_stat) {
            			if (full_stat[element] !== '-1') {
            				output_stat[element] = full_stat[element];
            			}
            		};
            		
            		return output_stat;
            	}
            };
            
            try {
            	const params = JSON.parse(value);
            	Nutanix.setParams(['endpoint_host', 'endpoint_port', 'username', 'password', 'auth_type', 'api_method'], params);
            
            	const url = 'https://' + Nutanix.params.endpoint_host + ':' + Nutanix.params.endpoint_port + '/PrismGateway/services/rest/v2.0/' + Nutanix.params.api_method,
            		result = Nutanix.request(url);
            
            	return JSON.stringify(result);
            }
            catch (error) {
            	error += (String(error).endsWith('.')) ? '' : '.';
            	Zabbix.log(4, '[ Nutanix ] ERROR: ' + error);
            
            	return JSON.stringify({ 'error': error });
            }
            
          description: 'Get the available hosts.'
          timeout: 10s
          parameters:
            - name: api_method
              value: hosts
            - name: auth_type
              value: basic
            - name: endpoint_host
              value: '{$NUTANIX.PRISM.ELEMENT.IP}'
            - name: endpoint_port
              value: '{$NUTANIX.PRISM.ELEMENT.PORT}'
            - name: password
              value: '{$NUTANIX.PASSWORD}'
            - name: proxy
              value: '{$NUTANIX.PROXY}'
            - name: username
              value: '{$NUTANIX.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: 7fa751ec3908489391aa2403723e2ac1
          name: 'Nutanix: Get host check'
          type: DEPENDENT
          key: nutanix.host.get.check
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          description: 'Data collection check. Check the latest values for details.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.error
              error_handler: CUSTOM_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: nutanix.host.get
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: 56e915c86d4640c3b073cb8309bf1d6e
              expression: 'length(last(/Nutanix Prism Element by HTTP/nutanix.host.get.check))>0'
              name: 'Nutanix: Failed to get host data from the API'
              priority: HIGH
              description: 'Failed to get data from the API. Check the latest values for details.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 10cd43e73f1146cf8eb4bffd33978344
          name: 'Nutanix: Get storage container'
          type: SCRIPT
          key: nutanix.storage.container.get
          delay: 10m
          history: '0'
          trends: '0'
          value_type: TEXT
          params: |
            var Nutanix = {
            	params: {},
            
            	setParams: function (requiredParams, allParams) {
            		requiredParams.forEach(function (field) {
            			if (typeof allParams !== 'object' || typeof allParams[field] === 'undefined' || allParams[field] === '') {
            				throw 'Required param is not set: ' + field + '.';
            			}
            		});
            
            		Nutanix.params = params;
            	},
            
            	request: function (url) {
            
            		var request = new HttpRequest();
            
            		if (typeof Nutanix.params.proxy !== 'undefined' && Nutanix.params.proxy !== '') {
            			request.setProxy(Nutanix.params.proxy);
            		}
            
            		request.setHttpAuth(HTTPAUTH_BASIC, Nutanix.params.username, Nutanix.params.password);
            
            		Zabbix.log(4, '[ Nutanix ] Sending request: ' + url);
            
            		const response = request.get(url);
            
            		Zabbix.log(4, '[ Nutanix ] Received response with status code ' + request.getStatus() + ': ' + response);
            
            		if (request.getStatus() < 200 || request.getStatus() >= 300) {
            			throw 'Request failed with status code ' + request.getStatus() + ': ' + response;
            		}
            
            		try {
            			response = JSON.parse(response);
            		}
            		catch (error) {
            			throw 'Failed to parse response received from Nutanix PRISM API. Check debug log for more information.';
            		}
            
            		return response;
            	},
            
            	deduplicateAlerts: function (full_data) {
            		const severity_mapping = [
            			'kinfo',
            			'kwarning',
            			'kcritical'
            		]
            
            		var output_data = {};
            		for (var entity in full_data.entities) {
            	
            			if (Nutanix.params.api_method === 'clusters') {
            				if (result.entities[entity].node_uuid.split('-').length == 5) continue;
            			}
            
            			var severity = severity_mapping.indexOf(full_data.entities[entity].severity.toLowerCase()),
            				message = full_data.entities[entity].message,
            				title = full_data.entities[entity].alert_title;
            	
            			full_data.entities[entity].context_types.forEach(function(context, index) {
            				message = message.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            				title = title.replace('{' + context + '}', full_data.entities[entity].context_values[index]);
            			});
            	
            			key = md5(title + message);
            			if (key in output_data) {
            				if (full_data.entities[entity].created_time_stamp_in_usecs > output_data[key].created) {
            					output_data[key].created = full_data.entities[entity].created_time_stamp_in_usecs;
            					output_data[key].severity = severity !== -1 ? severity : 3;
            					output_data[key].state = full_data.entities[entity].resolved ? 0 : 1;
            					output_data[key].message = full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message;
            					output_data[key].last_id = full_data.entities[entity].id;
            				}
            				output_data[key].count += 1;
            			} else {
            				output_data[key] = {
            					"name": title + ' - ' + message,
            					"title": title != '' ? title : message,
            					"created": full_data.entities[entity].created_time_stamp_in_usecs,
            					"severity": severity !== -1 ? severity : 3,
            					"state": full_data.entities[entity].resolved ? 0 : 1,
            					"message": full_data.entities[entity].detailed_message != '' ? full_data.entities[entity].detailed_message : message,
            					"last_id": full_data.entities[entity].id,
            					"count": 1
            				}
            			}
            		}
            
            		return output_data;
            	},
            
            	cleanUnsupported: function (full_stat) {
            		var output_stat = {};
            		for (var element in full_stat) {
            			if (full_stat[element] !== '-1') {
            				output_stat[element] = full_stat[element];
            			}
            		};
            		
            		return output_stat;
            	}
            };
            
            try {
            	const params = JSON.parse(value);
            	Nutanix.setParams(['endpoint_host', 'endpoint_port', 'username', 'password', 'auth_type', 'api_method'], params);
            
            	const url = 'https://' + Nutanix.params.endpoint_host + ':' + Nutanix.params.endpoint_port + '/PrismGateway/services/rest/v2.0/' + Nutanix.params.api_method,
            		result = Nutanix.request(url);
            
            	var output_data = {};
            	for (var entity in result.entities) {
            		output_data[result.entities[entity].storage_container_uuid] = result.entities[entity]
            	}
            
            	return JSON.stringify(output_data);
            }
            catch (error) {
            	error += (String(error).endsWith('.')) ? '' : '.';
            	Zabbix.log(4, '[ Nutanix ] ERROR: ' + error);
            
            	return JSON.stringify({ 'error': error });
            }
            
          description: 'Get the available storage containers.'
          timeout: 10s
          parameters:
            - name: api_method
              value: storage_containers
            - name: auth_type
              value: basic
            - name: endpoint_host
              value: '{$NUTANIX.PRISM.ELEMENT.IP}'
            - name: endpoint_port
              value: '{$NUTANIX.PRISM.ELEMENT.PORT}'
            - name: password
              value: '{$NUTANIX.PASSWORD}'
            - name: proxy
              value: '{$NUTANIX.PROXY}'
            - name: username
              value: '{$NUTANIX.USER}'
          tags:
            - tag: component
              value: raw
        - uuid: a59d77244200466384ec0b4cad7648db
          name: 'Nutanix: Get storage container check'
          type: DEPENDENT
          key: nutanix.storage.container.get.check
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          description: 'Data collection check. Check the latest values for details.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.error
              error_handler: CUSTOM_VALUE
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 3h
          master_item:
            key: nutanix.storage.container.get
          tags:
            - tag: component
              value: status
          triggers:
            - uuid: f46c6213084c4afe88065beb6cdcef33
              expression: 'length(last(/Nutanix Prism Element by HTTP/nutanix.storage.container.get.check))>0'
              name: 'Nutanix: Failed to get storage container data from the API'
              priority: HIGH
              description: 'Failed to get data from the API. Check the latest values for details.'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: 3611bdb3bf0343bc813510e11d32f273
          name: 'Cluster discovery'
          type: DEPENDENT
          key: nutanix.cluster.discovery
          delay: '0'
          filter:
            evaltype: AND
            conditions:
              - macro: '{#NUTANIX.CLUSTER.NAME}'
                value: '{$NUTANIX.CLUSTER.DISCOVERY.NAME.MATCHES}'
                formulaid: A
              - macro: '{#NUTANIX.CLUSTER.NAME}'
                value: '{$NUTANIX.CLUSTER.DISCOVERY.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Discovery of all clusters.'
          host_prototypes:
            - uuid: c1f630a16e304dcda7771895344638c7
              host: '{#NUTANIX.CLUSTER.UUID}'
              name: '{#NUTANIX.CLUSTER.NAME}'
              group_links:
                - group:
                    name: Templates/Applications
              templates:
                - name: 'Nutanix Cluster Prism Element by HTTP'
              macros:
                - macro: '{$NUTANIX.CLUSTER.UUID}'
                  value: '{#NUTANIX.CLUSTER.UUID}'
                  description: 'UUID of the cluster.'
          master_item:
            key: nutanix.cluster.get
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.entities
            - type: JAVASCRIPT
              parameters:
                - |
                  const json_data = JSON.parse(value);
                  
                  const result = json_data.map(function(entity) {
                      return {
                          "{#NUTANIX.CLUSTER.NAME}": entity.name ? entity.name : entity.uuid,
                          "{#NUTANIX.CLUSTER.UUID}": entity.uuid
                      };
                  });
                  
                  return JSON.stringify(result);
                  
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 19cd9a3bc7ac4e42860f3e3b0ab20afe
          name: 'Host discovery'
          type: DEPENDENT
          key: nutanix.host.discovery
          delay: '0'
          filter:
            evaltype: AND
            conditions:
              - macro: '{#NUTANIX.HOST.NAME}'
                value: '{$NUTANIX.HOST.DISCOVERY.NAME.MATCHES}'
                formulaid: A
              - macro: '{#NUTANIX.HOST.NAME}'
                value: '{$NUTANIX.HOST.DISCOVERY.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Discovery of all hosts.'
          host_prototypes:
            - uuid: 24ccbeb75dc949ccb6c094416618443b
              host: '{#NUTANIX.HOST.UUID}'
              name: '{#NUTANIX.HOST.NAME}'
              group_links:
                - group:
                    name: Templates/Applications
              templates:
                - name: 'Nutanix Host Prism Element by HTTP'
              macros:
                - macro: '{$NUTANIX.HOST.UUID}'
                  value: '{#NUTANIX.HOST.UUID}'
                  description: 'UUID of the host.'
          master_item:
            key: nutanix.host.get
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.entities
            - type: JAVASCRIPT
              parameters:
                - |
                  const json_data = JSON.parse(value);
                  
                  const result = json_data.map(function(entity) {
                      return {
                          "{#NUTANIX.HOST.NAME}": entity.name ? entity.name : entity.uuid,
                          "{#NUTANIX.HOST.UUID}": entity.uuid
                      };
                  });
                  
                  return JSON.stringify(result);
                  
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
        - uuid: 7ece7ee4f9d0423b856b6ecd7f616026
          name: 'Storage container discovery'
          type: DEPENDENT
          key: nutanix.storage.container.discovery
          delay: '0'
          filter:
            evaltype: AND
            conditions:
              - macro: '{#STORAGE.CONTAINER.NAME}'
                value: '{$NUTANIX.STORAGE.CONTAINER.DISCOVERY.NAME.MATCHES}'
                formulaid: A
              - macro: '{#STORAGE.CONTAINER.NAME}'
                value: '{$NUTANIX.STORAGE.CONTAINER.DISCOVERY.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Discovery of all storage containers.'
          item_prototypes:
            - uuid: f0a6602489f54d5c8be85bb75ebd3e6f
              name: 'Nutanix: Container [{#STORAGE.CONTAINER.NAME}]: Space: Total, bytes'
              type: DEPENDENT
              key: 'nutanix.storage.container.capacity.bytes["{#STORAGE.CONTAINER.UUID}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'The total space of the storage container.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#STORAGE.CONTAINER.UUID}''].usage_stats.[''storage.capacity_bytes'']'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.storage.container.get
              tags:
                - tag: component
                  value: storage
                - tag: container
                  value: '{#STORAGE.CONTAINER.NAME}'
            - uuid: dac6fb1aa0ee4d93ab67e1bd3374c412
              name: 'Nutanix: Container [{#STORAGE.CONTAINER.NAME}]: Space: Free, bytes'
              type: DEPENDENT
              key: 'nutanix.storage.container.free.bytes["{#STORAGE.CONTAINER.UUID}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'The free space of the storage container.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#STORAGE.CONTAINER.UUID}''].usage_stats.[''storage.free_bytes'']'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.storage.container.get
              tags:
                - tag: component
                  value: storage
                - tag: container
                  value: '{#STORAGE.CONTAINER.NAME}'
            - uuid: dc76d8405d204e90bd6213f34344dcb6
              name: 'Nutanix: Container [{#STORAGE.CONTAINER.NAME}]: Replication factor'
              type: DEPENDENT
              key: 'nutanix.storage.container.replication.factor["{#STORAGE.CONTAINER.UUID}"]'
              delay: '0'
              history: 7d
              description: 'The replication factor of the storage container.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#STORAGE.CONTAINER.UUID}''].replication_factor'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.storage.container.get
              tags:
                - tag: component
                  value: storage
                - tag: container
                  value: '{#STORAGE.CONTAINER.NAME}'
            - uuid: 5d40812ff4f14146a5199edf271be1ec
              name: 'Nutanix: Container [{#STORAGE.CONTAINER.NAME}]: Space: Used, bytes'
              type: DEPENDENT
              key: 'nutanix.storage.container.usage.bytes["{#STORAGE.CONTAINER.UUID}"]'
              delay: '0'
              history: 7d
              units: B
              description: 'The used space of the storage container.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[''{#STORAGE.CONTAINER.UUID}''].usage_stats.[''storage.usage_bytes'']'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: nutanix.storage.container.get
              tags:
                - tag: component
                  value: storage
                - tag: container
                  value: '{#STORAGE.CONTAINER.NAME}'
          graph_prototypes:
            - uuid: b067c9f9467b4760b43235aa453ee424
              name: 'Nutanix: Container [{#STORAGE.CONTAINER.NAME}]: Space: Total and Used'
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 0040FF
                  item:
                    host: 'Nutanix Prism Element by HTTP'
                    key: 'nutanix.storage.container.usage.bytes["{#STORAGE.CONTAINER.UUID}"]'
                - sortorder: '1'
                  drawtype: GRADIENT_LINE
                  color: 00BFFF
                  item:
                    host: 'Nutanix Prism Element by HTTP'
                    key: 'nutanix.storage.container.capacity.bytes["{#STORAGE.CONTAINER.UUID}"]'
          master_item:
            key: nutanix.storage.container.get
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  const json_data = JSON.parse(value);
                  var output_data = [];
                  
                  for (var entity in json_data) {
                      output_data.push({
                          "{#STORAGE.CONTAINER.UUID}": json_data[entity].storage_container_uuid,
                          "{#STORAGE.CONTAINER.NAME}": json_data[entity].name
                      });
                  }
                  
                  return JSON.stringify(output_data);
                  
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1h
      tags:
        - tag: class
          value: software
        - tag: target
          value: nutanix
        - tag: target
          value: prism-element
      macros:
        - macro: '{$NUTANIX.CLUSTER.DISCOVERY.NAME.MATCHES}'
          value: '.*'
          description: 'Filter of discoverable Nutanix clusters by name.'
        - macro: '{$NUTANIX.CLUSTER.DISCOVERY.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Filter to exclude discovered Nutanix clusters by name.'
        - macro: '{$NUTANIX.HOST.DISCOVERY.NAME.MATCHES}'
          value: '.*'
          description: 'Filter of discoverable Nutanix hosts by name.'
        - macro: '{$NUTANIX.HOST.DISCOVERY.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Filter to exclude discovered Nutanix hosts by name.'
        - macro: '{$NUTANIX.PASSWORD}'
          type: SECRET_TEXT
          description: 'Nutanix API password.'
        - macro: '{$NUTANIX.PRISM.ELEMENT.IP}'
          value: '<Put your IP here>'
          description: 'Set the Nutanix API IP here.'
        - macro: '{$NUTANIX.PRISM.ELEMENT.PORT}'
          value: '9440'
          description: 'Set the Nutanix API port here.'
        - macro: '{$NUTANIX.PROXY}'
          description: 'Sets the HTTP proxy value. If this macro is empty, then no proxy is used.'
        - macro: '{$NUTANIX.STORAGE.CONTAINER.DISCOVERY.NAME.MATCHES}'
          value: '.*'
          description: 'Filter of discoverable storage containers by name.'
        - macro: '{$NUTANIX.STORAGE.CONTAINER.DISCOVERY.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Filter to exclude discovered storage containers by name.'
        - macro: '{$NUTANIX.USER}'
          value: '<Put your API username here>'
          description: 'Nutanix API username.'
      dashboards:
        - uuid: 02f05b74967140859a2e86d0d14b0545
          name: 'Nutanix Prism Element overview'
          pages:
            - name: 'Nutanix: Overview'
              widgets:
                - type: GRAPH_PROTOTYPE
                  name: Capacity
                  width: '12'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid
                      value:
                        host: 'Nutanix Prism Element by HTTP'
                        key: 'nutanix.storage.container.capacity.bytes["{#STORAGE.CONTAINER.UUID}"]'
                    - type: INTEGER
                      name: source_type
                      value: '3'
                - type: GRAPH_PROTOTYPE
                  name: 'Free space'
                  'y': '6'
                  width: '24'
                  height: '6'
                  fields:
                    - type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        host: 'Nutanix Prism Element by HTTP'
                        name: 'Nutanix: Container [{#STORAGE.CONTAINER.NAME}]: Space: Total and Used'
                - type: GRAPH_PROTOTYPE
                  name: 'Replication factor'
                  x: '12'
                  width: '12'
                  height: '6'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: ITEM_PROTOTYPE
                      name: itemid
                      value:
                        host: 'Nutanix Prism Element by HTTP'
                        key: 'nutanix.storage.container.replication.factor["{#STORAGE.CONTAINER.UUID}"]'
                    - type: INTEGER
                      name: source_type
                      value: '3'
  triggers:
    - uuid: 95d69032f7d7426d8073524ecd72fcd4
      expression: 'last(/Nutanix Cluster Prism Element by HTTP/nutanix.cluster.redundancy.factor.current)<>last(/Nutanix Cluster Prism Element by HTTP/nutanix.cluster.redundancy.factor.desired)'
      name: 'Nutanix Cluster: Redundancy factor mismatched'
      priority: HIGH
      description: 'Current redundancy factor does not match the desired redundancy factor.'
      tags:
        - tag: scope
          value: availability
  graphs:
    - uuid: 65515b97fe634d65a85a1d364887c67b
      name: 'Nutanix Cluster: Content Cache: Hit rate, %'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.content.cache.hit.percent
    - uuid: 47934bfa13084fa4a3986796298e0b47
      name: 'Nutanix Cluster: Content Cache: Memory, bytes'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.content.cache.logical.memory.usage.bytes
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.content.cache.saved.memory.usage.bytes
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.content.cache.physical.memory.usage.bytes
    - uuid: d044e823d54444c4985f653685b9b438
      name: 'Nutanix Cluster: Content Cache: SSD usage, bytes'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.content.cache.logical.ssd.usage.bytes
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.content.cache.physical.ssd.usage.bytes
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.content.cache.saved.ssd.usage.bytes
    - uuid: 3ef6efe82e004c9bb274e8f653a1ae9e
      name: 'Nutanix Cluster: General: IO, bandwidth'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.io.bandwidth
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.io.read.bandwidth
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.io.write.bandwidth
    - uuid: 9630f812813549d8909ee46d06b38a7b
      name: 'Nutanix Cluster: General: IO, latency'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.io.latency
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.io.read.latency
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.io.write.latency
    - uuid: 03b6d22744a5461f937f481cf1ca0854
      name: 'Nutanix Cluster: General: IOPS'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.iops
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.iops.read
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.iops.write
    - uuid: b0881e58124f4e3c8967177a18293b01
      name: 'Nutanix Cluster: General: Read IO / Write IO'
      type: STACKED
      graph_items:
        - color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.io.write.percent
        - sortorder: '1'
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.io.read.percent
    - uuid: 2eb73e5623dc444d9296efb721b44534
      name: 'Nutanix Cluster: Hypervisor: CPU usage, %'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.cpu.usage.percent
    - uuid: 80d34c61ea8b436caf6d295b2330c4fd
      name: 'Nutanix Cluster: Hypervisor: IO, bandwidth'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.io.bandwidth
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.io.read.bandwidth
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.io.write.bandwidth
    - uuid: 167229af868b49b5a0c66eaa3c6fad93
      name: 'Nutanix Cluster: Hypervisor: IO, latency'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.io.latency
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.io.read.latency
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.io.write.latency
    - uuid: f8a6865e91c44452bcfd26fdaefa42ba
      name: 'Nutanix Cluster: Hypervisor: IOPS'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.iops
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.iops.read
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.iops.write
    - uuid: 9da8e4c6642d4150ac5d45f1cb817253
      name: 'Nutanix Cluster: Hypervisor: Memory usage, %'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: FF465C
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.memory.usage.percent
    - uuid: ad7e987b56954a51b898f9aa09b2ef89
      name: 'Nutanix Cluster: IO overview'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.io
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.io
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.io
    - uuid: c1ea65971d3d4816a68c9cf608939e0f
      name: 'Nutanix Cluster: IOPS overview'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.general.iops
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.hypervisor.iops
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.iops
    - uuid: 66c94c9ea2264d96864df112f09b7d5f
      name: 'Nutanix Cluster: Storage Controller: IO'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.io
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.io.read
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.io.write
    - uuid: ed97331326f14627900146141aff0333
      name: 'Nutanix Cluster: Storage Controller: IO, bandwidth'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.io.bandwidth
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.io.read.bandwidth
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.io.write.bandwidth
    - uuid: 3a8aa7c3dc2d44ed8ab3c54fa092797d
      name: 'Nutanix Cluster: Storage Controller: IOPS'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.iops
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.iops.read
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.iops.write
    - uuid: baa376dae2024a5f83b5d84120878fd5
      name: 'Nutanix Cluster: Storage Controller: Read IO / Write IO'
      type: STACKED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.io.read.percent
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.io.write.percent
    - uuid: ac4df503b04a4f339c5d39bd72fd3832
      name: 'Nutanix Cluster: Storage Tier: Das-sata'
      type: STACKED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.tier.das_sata.free.bytes
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.tier.das_sata.usage.bytes
    - uuid: 1edd2ff1710649ed9e037b2a00dc9f22
      name: 'Nutanix Cluster: Storage Tier: Free, bytes'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.tier.das_sata.free.bytes
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.tier.ssd.free.bytes
    - uuid: ff4e11828c9244c2b4021c826bec0700
      name: 'Nutanix Cluster: Storage Tier: SSD'
      type: STACKED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.tier.ssd.free.bytes
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Cluster Prism Element by HTTP'
            key: nutanix.cluster.storage.controller.tier.ssd.usage.bytes
    - uuid: 10cc868569aa457194f23f000d76c42c
      name: 'Nutanix Host: Content Cache: Hit rate, %'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.content.cache.hit.percent
    - uuid: 7573a56ef8c147b7af2a3d6208af7169
      name: 'Nutanix Host: Content Cache: Memory, bytes'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.content.cache.logical.memory.usage.bytes
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.content.cache.saved.memory.usage.bytes
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.content.cache.physical.memory.usage.bytes
    - uuid: 6ec9ec1bcf17441fbe2fa2130a154f4e
      name: 'Nutanix Host: Content Cache: SSD usage, bytes'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.content.cache.logical.ssd.usage.bytes
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.content.cache.physical.ssd.usage.bytes
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.content.cache.saved.ssd.usage.bytes
    - uuid: 75c38f9f8c1c4760bff3f73f97de2f81
      name: 'Nutanix Host: General: IO, bandwidth'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.io.bandwidth
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.io.read.bandwidth
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.io.write.bandwidth
    - uuid: c987de890149423184078af71fa4929e
      name: 'Nutanix Host: General: IO, latency'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.io.latency
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.io.read.latency
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.io.write.latency
    - uuid: 6ba2e066462543b1a5c732d4fe692f94
      name: 'Nutanix Host: General: IOPS'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.iops
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.iops.read
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.iops.write
    - uuid: ef5cc6450ff849d6bb17bca58f1ded6e
      name: 'Nutanix Host: General: Read IO / Write IO'
      type: STACKED
      graph_items:
        - color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.io.write.percent
        - sortorder: '1'
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.io.read.percent
    - uuid: d81d699dcc8f40928fc200919a6d18ca
      name: 'Nutanix Host: Hypervisor: CPU usage, %'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.cpu.usage.percent
    - uuid: d0053e62420149cdaea9ea121d35b12f
      name: 'Nutanix Host: Hypervisor: IO, bandwidth'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.io.bandwidth
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.io.read.bandwidth
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.io.write.bandwidth
    - uuid: 4856dc8a3c1c4932bbcf6a2c2a98a33e
      name: 'Nutanix Host: Hypervisor: IO, latency'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.io.latency
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.io.read.latency
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.io.write.latency
    - uuid: 1829358efd7445bbbf3d05233eb6d45d
      name: 'Nutanix Host: Hypervisor: IOPS'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.iops
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.iops.read
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.iops.write
    - uuid: d95d9844425b4db5af1346aeac315021
      name: 'Nutanix Host: Hypervisor: Memory usage, %'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: FF465C
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.memory.usage.percent
    - uuid: 943cbd42a13147bdb76a5a171351b5c0
      name: 'Nutanix Host: Hypervisor: Received, bytes'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.received.bytes
    - uuid: e60a52fb92a043258b962457ea0cd616
      name: 'Nutanix Host: Hypervisor: Transmitted, bytes'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: FF465C
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.transmitted.bytes
    - uuid: 0dc058779ebb484e85cc886ea431f669
      name: 'Nutanix Host: IOPS overview'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.general.iops
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.hypervisor.iops
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.iops
    - uuid: be009461151d40f2a8e655eb3e9381fe
      name: 'Nutanix Host: Storage Controller: IO'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.io
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.io.read
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.io.write
    - uuid: b6529f70381a4762b0bf965be9a52e2f
      name: 'Nutanix Host: Storage Controller: IO, bandwidth'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.io.bandwidth
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.io.read.bandwidth
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.io.write.bandwidth
    - uuid: 031f1610f18441b9b96c8bb47e8913ac
      name: 'Nutanix Host: Storage Controller: IOPS'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.iops
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.iops.read
        - sortorder: '2'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.iops.write
    - uuid: d52026a6d40844fbadc9b5e02f0e02ef
      name: 'Nutanix Host: Storage Controller: Read IO / Write IO'
      type: STACKED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: FF0080
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.io.read.percent
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.io.write.percent
    - uuid: c0740b2c536646ceb85aabeca052e2cb
      name: 'Nutanix Host: Storage Tier: Das-sata'
      type: STACKED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.tier.das_sata.free.bytes
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.tier.das_sata.usage.bytes
    - uuid: 12fb09594c2f449182e641e5f12f32d0
      name: 'Nutanix Host: Storage Tier: SSD'
      type: STACKED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 00BFFF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.tier.ssd.free.bytes
        - sortorder: '1'
          drawtype: GRADIENT_LINE
          color: 0040FF
          item:
            host: 'Nutanix Host Prism Element by HTTP'
            key: nutanix.host.storage.controller.tier.ssd.usage.bytes
